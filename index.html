<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#f3f1ec;--surface:#fff;--surface-alt:#faf9f6;--border:#e2ddd4;
  --text:#2c2418;--text-s:#7a6f5f;--text-m:#a89e8e;
  --accent:#6b5b45;--accent-h:#554832;--accent-l:#f0ebe2;
  --green:#4a7a52;--green-l:#edf5ee;--red:#a04040;--red-l:#fbeaea;
  --orange:#9a7020;--orange-l:#faf3e0;--blue:#3a6a8a;--blue-l:#e8f0f7;
  --purple:#6a5a8a;--purple-l:#f0ecf5;
  --sh-s:0 1px 3px rgba(44,36,24,.05);--sh-m:0 4px 16px rgba(44,36,24,.08);--sh-l:0 8px 32px rgba(44,36,24,.12);
  --r:10px;--rs:6px;--rl:14px;
  --mgr:#6a5a8a;--mgr-l:#f0ecf5;--staff:#3a6a8a;--staff-l:#e8f0f7;
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'IBM Plex Sans Thai',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}

/* ===== LOGIN ===== */
#login-screen{display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,#2c2418 0%,#4a3d2e 50%,#6b5b45 100%);position:fixed;inset:0;z-index:9999}
#login-screen.hidden{display:none}
.login-card{background:var(--surface);border-radius:20px;padding:48px 40px;width:420px;box-shadow:var(--sh-l);text-align:center}
.login-logo{width:72px;height:72px;background:var(--accent);border-radius:16px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;font-size:28px;font-weight:700;color:white}
.login-title{font-size:22px;font-weight:700;margin-bottom:4px}
.login-sub{font-size:13px;color:var(--text-s);margin-bottom:32px}
.pin-dots{display:flex;gap:12px;justify-content:center;margin:24px 0 8px}
.pin-dot{width:18px;height:18px;border-radius:50%;border:2px solid var(--border);transition:all .2s}
.pin-dot.filled{background:var(--accent);border-color:var(--accent)}
.pin-dot.wrong{background:var(--red);border-color:var(--red);animation:shake .4s}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}
.pin-pad{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;max-width:280px;margin:24px auto 0}
.pin-btn{width:72px;height:72px;border-radius:50%;border:2px solid var(--border);background:var(--surface);font-family:inherit;font-size:28px;font-weight:600;cursor:pointer;transition:all .15s;justify-self:center;color:var(--text)}
.pin-btn:hover{background:var(--accent-l);border-color:var(--accent)}
.pin-btn:active{transform:scale(.95)}
.pin-btn.clear{font-size:14px;border:none;color:var(--text-s)}
.pin-btn.backspace{font-size:20px;border:none;color:var(--text-s)}
.login-role{display:flex;gap:8px;justify-content:center;margin-bottom:24px}
.role-choice{padding:12px 24px;border:2px solid var(--border);border-radius:var(--r);cursor:pointer;font-family:inherit;font-size:14px;font-weight:500;background:var(--surface);transition:all .15s;display:flex;align-items:center;gap:8px}
.role-choice:hover{border-color:var(--accent)}
.role-choice.sel-mgr{border-color:var(--mgr);background:var(--mgr-l);color:var(--mgr)}
.role-choice.sel-staff{border-color:var(--staff);background:var(--staff-l);color:var(--staff)}
.login-hint{font-size:12px;color:var(--text-m);margin-top:4px}
.login-err{color:var(--red);font-size:13px;min-height:20px;margin-top:8px;font-weight:500}

/* ===== LAYOUT ===== */
.app{display:flex;min-height:100vh}
.sidebar{width:260px;background:var(--text);color:white;position:fixed;top:0;left:0;bottom:0;z-index:100;display:flex;flex-direction:column;overflow-y:auto}
.sb-head{padding:20px;border-bottom:1px solid rgba(255,255,255,.1)}
.sb-logo{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.sb-logo-icon{width:42px;height:42px;background:var(--accent);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700}
.sb-logo-text{font-size:15px;font-weight:600;line-height:1.3}
.sb-logo-sub{font-size:11px;opacity:.5}
.sb-role{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:600;margin-top:8px}
.sb-role-mgr{background:var(--mgr);color:white}
.sb-role-staff{background:var(--staff);color:white}
.nav-sec{padding:16px 12px 6px;font-size:10px;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.3);font-weight:600}
.nav-i{display:flex;align-items:center;gap:12px;padding:11px 16px;margin:2px 8px;border-radius:var(--rs);color:rgba(255,255,255,.6);cursor:pointer;transition:all .15s;font-size:13px;border:none;background:none;width:calc(100% - 16px);text-align:left;font-family:inherit}
.nav-i:hover{background:rgba(255,255,255,.08);color:rgba(255,255,255,.9)}
.nav-i.active{background:rgba(255,255,255,.12);color:white;font-weight:500}
.nav-icon{font-size:18px;width:24px;text-align:center}
.nav-badge{margin-left:auto;background:var(--red);color:white;font-size:10px;font-weight:600;padding:2px 7px;border-radius:10px;min-width:20px;text-align:center}
.nav-badge-o{background:var(--orange)}
.sb-foot{margin-top:auto;padding:16px;border-top:1px solid rgba(255,255,255,.1)}
.sb-logout{display:flex;align-items:center;gap:8px;width:100%;padding:10px 14px;border:1px solid rgba(255,255,255,.15);border-radius:var(--rs);background:none;color:rgba(255,255,255,.6);font-size:13px;cursor:pointer;font-family:inherit;transition:all .15s}
.sb-logout:hover{background:rgba(255,255,255,.08);color:white}

.main-area{flex:1;margin-left:260px;min-height:100vh}
.top-bar{background:var(--surface);border-bottom:1px solid var(--border);padding:16px 32px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:50}
.pg-title{font-size:20px;font-weight:700;letter-spacing:-.3px}
.pg-desc{font-size:12px;color:var(--text-s);margin-top:2px}
.role-tag{display:inline-flex;align-items:center;gap:6px;padding:5px 12px;border-radius:20px;font-size:11px;font-weight:600}
.role-tag-mgr{background:var(--mgr-l);color:var(--mgr)}
.role-tag-staff{background:var(--staff-l);color:var(--staff)}
.content{padding:28px 32px;max-width:1300px}

/* Pages */
.page{display:none;animation:fadeUp .25s ease}
.page.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

/* Components */
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--rl);box-shadow:var(--sh-s)}
.card-body{padding:24px}
.card-head{padding:18px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.card-t{font-size:15px;font-weight:600;display:flex;align-items:center;gap:8px}

.btn{padding:9px 18px;border:none;border-radius:var(--rs);font-family:inherit;font-size:13px;font-weight:500;cursor:pointer;transition:all .15s;display:inline-flex;align-items:center;gap:7px;white-space:nowrap}
.btn-p{background:var(--accent);color:white}.btn-p:hover{background:var(--accent-h)}
.btn-g{background:var(--green);color:white}.btn-g:hover{opacity:.9}
.btn-mgr{background:var(--mgr);color:white}
.btn-o{background:var(--surface);color:var(--text);border:1px solid var(--border)}.btn-o:hover{border-color:var(--accent)}
.btn-ghost{background:transparent;color:var(--text-s)}.btn-ghost:hover{color:var(--text);background:var(--accent-l)}
.btn-sm{padding:6px 12px;font-size:12px}
.btn-lg{padding:14px 28px;font-size:16px}
.btn-danger{background:var(--red);color:white}.btn-danger:hover{opacity:.9}

/* Table */
.tbl-w{overflow-x:auto}
table{width:100%;border-collapse:collapse;font-size:13px}
thead th{background:var(--surface-alt);padding:10px 14px;text-align:left;font-weight:600;font-size:11px;text-transform:uppercase;letter-spacing:.4px;color:var(--text-s);border-bottom:1px solid var(--border);white-space:nowrap}
tbody td{padding:11px 14px;border-bottom:1px solid var(--border)}
tbody tr:last-child td{border-bottom:none}
tbody tr:hover{background:var(--accent-l)}
.mono{font-family:'JetBrains Mono',monospace;font-size:12px}
.text-r{text-align:right}

.badge{display:inline-flex;align-items:center;gap:5px;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:500}
.b-green{background:var(--green-l);color:var(--green)}.b-red{background:var(--red-l);color:var(--red)}
.b-orange{background:var(--orange-l);color:var(--orange)}.b-blue{background:var(--blue-l);color:var(--blue)}
.b-purple{background:var(--purple-l);color:var(--purple)}
.dot{width:6px;height:6px;border-radius:50%;background:currentColor}

/* Stats */
.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}
.stat{background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:18px 20px;box-shadow:var(--sh-s)}
.stat-label{font-size:11px;font-weight:500;text-transform:uppercase;letter-spacing:.4px;color:var(--text-m);margin-bottom:8px}
.stat-val{font-family:'JetBrains Mono',monospace;font-size:24px;font-weight:700}
.stat-sub{font-size:12px;color:var(--text-s);margin-top:4px}

/* Form (LARGER for manager) */
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.form-grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px}
.form-group{display:flex;flex-direction:column;gap:5px}
.full{grid-column:1/-1}
.form-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.4px;color:var(--text-s)}
.form-input,.form-select{padding:9px 12px;border:1px solid var(--border);border-radius:var(--rs);font-family:inherit;font-size:13px;background:var(--surface);color:var(--text);outline:none;transition:border-color .15s}
.form-input:focus,.form-select:focus{border-color:var(--accent)}
.form-input::placeholder{color:var(--text-m)}

/* LARGE form for manager entry */
.mgr-form .form-label{font-size:14px;font-weight:700;letter-spacing:0;text-transform:none;color:var(--text)}
.mgr-form .form-input,.mgr-form .form-select{padding:14px 16px;font-size:18px;border-radius:var(--r);border-width:2px}
.mgr-form .form-input:focus,.mgr-form .form-select:focus{border-color:var(--mgr);box-shadow:0 0 0 3px rgba(106,90,138,.15)}

/* Large service rows for manager */
.svc-row-lg{display:flex;align-items:center;gap:16px;padding:16px 20px;border:2px solid var(--border);border-radius:var(--r);margin-bottom:10px;transition:all .15s;min-height:64px}
.svc-row-lg:hover{border-color:var(--accent)}
.svc-row-lg.has-val{border-color:var(--green);background:var(--green-l)}
.svc-name-lg{font-size:17px;font-weight:600;min-width:140px}
.svc-type-tag{font-size:11px;padding:3px 10px;border-radius:10px;background:var(--surface-alt);color:var(--text-m);border:1px solid var(--border)}
.svc-ref-lg{font-size:14px;color:var(--text-s);font-family:'JetBrains Mono',monospace}
.svc-ref-btn-lg{font-size:13px;color:var(--blue);background:var(--blue-l);border:none;padding:6px 14px;border-radius:var(--rs);cursor:pointer;font-family:inherit;font-weight:500}
.svc-ref-btn-lg:hover{opacity:.8}
.svc-prev{font-size:12px;color:var(--blue);background:var(--blue-l);padding:4px 12px;border-radius:var(--rs);margin-right:8px;white-space:nowrap;cursor:pointer;border:1px solid transparent;transition:all .15s}
.svc-prev:hover{border-color:var(--blue);opacity:.9}
.svc-input-lg{width:160px;padding:12px 14px;border:2px solid var(--border);border-radius:var(--r);font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:600;text-align:right;outline:none;background:white}
.svc-input-lg:focus{border-color:var(--mgr);box-shadow:0 0 0 3px rgba(106,90,138,.15)}

/* Customer search for manager - LARGE */
.search-lg{position:relative;margin-bottom:20px}
.search-lg input{width:100%;padding:16px 20px 16px 50px;border:2px solid var(--border);border-radius:var(--r);font-family:inherit;font-size:18px;outline:none;transition:all .15s}
.search-lg input:focus{border-color:var(--mgr);box-shadow:0 0 0 3px rgba(106,90,138,.15)}
.search-lg-icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:22px;color:var(--text-m)}
.search-lg-results{position:absolute;top:100%;left:0;right:0;background:var(--surface);border:2px solid var(--mgr);border-top:none;border-radius:0 0 var(--r) var(--r);box-shadow:var(--sh-m);z-index:10;display:none}
.search-lg-results.show{display:block}
.search-result-item{padding:14px 20px;cursor:pointer;font-size:16px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px}
.search-result-item:hover{background:var(--accent-l)}
.search-result-item:last-child{border-bottom:none}
.search-result-code{font-family:'JetBrains Mono',monospace;font-size:14px;color:var(--text-s);min-width:80px}

/* Modal */
.modal-bg{display:none;position:fixed;inset:0;background:rgba(44,36,24,.45);backdrop-filter:blur(4px);z-index:300;justify-content:center;align-items:center}
.modal-bg.show{display:flex}
.modal{background:var(--surface);border-radius:var(--rl);max-width:700px;width:92%;max-height:90vh;overflow-y:auto;box-shadow:var(--sh-l)}
.modal-head{padding:20px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.modal-title{font-size:17px;font-weight:700}
.modal-body{padding:24px}
.modal-foot{padding:16px 24px;border-top:1px solid var(--border);display:flex;gap:10px;justify-content:flex-end}

/* Image viewer */
.img-viewer{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:400;justify-content:center;align-items:center;cursor:pointer}
.img-viewer.show{display:flex}
.img-viewer img{max-width:90%;max-height:90vh;border-radius:var(--r);box-shadow:0 0 40px rgba(0,0,0,.5)}

/* Invoice Preview */
.inv-preview{background:white;border:2px solid var(--border);border-radius:var(--rl);padding:40px;max-width:750px;margin:0 auto;box-shadow:var(--sh-l)}
.inv-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:28px;padding-bottom:20px;border-bottom:2px solid var(--text)}
.inv-title{font-size:26px;font-weight:700;letter-spacing:-.5px}
.inv-no{font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--text-s);margin-top:4px}
.inv-ml{font-size:10px;text-transform:uppercase;letter-spacing:.5px;color:var(--text-m);font-weight:600}
.inv-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:28px}
.inv-table{width:100%;margin-bottom:20px}
.inv-table th{padding:8px 0;border-bottom:2px solid var(--text);font-size:11px;text-transform:uppercase;letter-spacing:.4px;font-weight:600}
.inv-table td{padding:8px 0;border-bottom:1px solid var(--border);font-size:13px}
.inv-total-box{background:var(--text);color:white;padding:16px 24px;border-radius:var(--rs);text-align:right;min-width:220px}

/* QR + Signature area */
.inv-footer{margin-top:28px;border-top:2px solid var(--border);padding-top:24px;display:grid;grid-template-columns:1fr 1fr;gap:24px}
.qr-section{text-align:center}
.qr-placeholder{width:140px;height:140px;background:var(--surface-alt);border:2px dashed var(--border);border-radius:var(--r);display:flex;flex-direction:column;align-items:center;justify-content:center;margin:0 auto 8px;font-size:12px;color:var(--text-m)}
.sign-section{border:2px solid var(--border);border-radius:var(--r);padding:20px}
.sign-line{border-bottom:1px dashed var(--text-m);height:50px;margin:8px 0}
.sign-label{font-size:11px;color:var(--text-m);text-align:center}
.pay-check{display:flex;gap:16px;margin-top:12px}
.pay-check-item{display:flex;align-items:center;gap:6px;font-size:12px}
.pay-check-box{width:16px;height:16px;border:2px solid var(--text);border-radius:3px}

/* Receipt */
.receipt-preview{background:white;border:2px solid var(--border);border-radius:var(--rl);padding:40px;max-width:750px;margin:0 auto;box-shadow:var(--sh-l)}
.receipt-stamp{display:inline-flex;padding:8px 20px;border:3px solid var(--green);border-radius:var(--rs);color:var(--green);font-size:14px;font-weight:700;transform:rotate(-5deg);margin-top:8px}

/* Approval */
.approval-card{border:2px solid var(--border);border-radius:var(--r);padding:16px 20px;margin-bottom:12px;transition:all .15s}
.approval-card:hover{border-color:var(--accent);box-shadow:var(--sh-s)}
.approval-card.pending{border-left:4px solid var(--orange)}
.approval-card.approved{border-left:4px solid var(--green)}
.approval-img{width:120px;height:80px;object-fit:cover;border-radius:var(--rs);border:1px solid var(--border);cursor:pointer;transition:transform .15s}
.approval-img:hover{transform:scale(1.05)}

/* Inner tabs */
.in-tabs{display:flex;gap:2px;border-bottom:1px solid var(--border);padding:0 24px}
.in-tab{padding:12px 16px;font-size:13px;font-weight:500;color:var(--text-s);border:none;background:none;cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-1px;font-family:inherit;transition:all .15s}
.in-tab:hover{color:var(--text)}.in-tab.active{color:var(--accent);border-bottom-color:var(--accent)}

/* Highlight box */
.hb{padding:14px 18px;border-radius:var(--rs);border:1px solid}
.hb-green{border-color:rgba(74,122,82,.2);background:var(--green-l)}
.hb-orange{border-color:rgba(154,112,32,.2);background:var(--orange-l)}
.hb-purple{border-color:rgba(106,90,138,.2);background:var(--purple-l)}

/* Flow */
.flow{display:flex;align-items:center;gap:0;margin-bottom:24px;flex-wrap:wrap}
.flow-s{display:flex;align-items:center;gap:7px;padding:7px 14px;border-radius:20px;font-size:12px;font-weight:500;color:var(--text-m)}
.flow-s.active{background:var(--accent);color:white}
.flow-s.done{background:var(--green-l);color:var(--green)}
.flow-num{width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;border:2px solid currentColor}
.flow-s.active .flow-num{background:white;color:var(--accent);border-color:white}
.flow-s.done .flow-num{background:var(--green);color:white;border-color:var(--green)}
.flow-arr{width:28px;text-align:center;color:var(--text-m);font-size:14px}

/* Payment option */
.pay-opt{padding:12px;border:2px solid var(--border);border-radius:var(--rs);text-align:center;cursor:pointer;transition:all .15s}
.pay-opt:hover{border-color:var(--accent)}.pay-opt.sel{border-color:var(--accent);background:var(--accent-l)}

/* Invoice customer row hover */
.inv-cust-row{transition:all .15s}
.inv-cust-row:hover{background:var(--purple-l) !important;cursor:pointer}
/* Payment item selection (collect page) */
.pay-item{display:flex;align-items:center;padding:12px 20px;border-bottom:1px solid var(--border);cursor:pointer;transition:all .15s;gap:12px}
.pay-item:hover{background:var(--accent-l)}
.pay-item.sel{background:var(--green-l)}
.pay-item:not(.sel){opacity:.45}
.pay-item:not(.sel) .pay-item-amt{text-decoration:line-through;color:var(--text-m) !important}
.pay-item-chk{flex-shrink:0}
.pi-cb{width:22px;height:22px;border:2px solid var(--border);border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;color:transparent;transition:all .15s}
.pi-cb.checked{background:var(--green);border-color:var(--green);color:white}
.pay-item-info{flex:1}
.pay-item-name{font-weight:600;font-size:14px}
.pay-item-month{font-size:11px;color:var(--text-s)}
.pay-item-amt{font-weight:700;font-size:16px;color:var(--text)}

/* Payment channel blocks */
.pay-channel{padding:20px;border-bottom:2px solid var(--border);position:relative}
.pay-channel:last-of-type{border-bottom:none}
.pay-ch-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.pay-amt-input{border:2px solid var(--accent) !important;background:var(--accent-l) !important}

/* Helpers */
.flex{display:flex}.flex-col{flex-direction:column}.items-c{align-items:center}.jc-b{justify-content:space-between}
.gap-8{gap:8px}.gap-12{gap:12px}.gap-16{gap:16px}.gap-24{gap:24px}
.mt-12{margin-top:12px}.mt-16{margin-top:16px}.mt-24{margin-top:24px}
.mb-12{margin-bottom:12px}.mb-16{margin-bottom:16px}.mb-24{margin-bottom:24px}

@media(max-width:900px){
  .sidebar{transform:translateX(-100%)}.main-area{margin-left:0}
  .stats{grid-template-columns:repeat(2,1fr)}.form-grid,.form-grid-3{grid-template-columns:1fr}
  .content{padding:16px}.inv-grid{grid-template-columns:1fr}.inv-footer{grid-template-columns:1fr}
}
@media(max-width:1100px){
  .collect-grid{grid-template-columns:1fr !important}
}

/* Print styles */
@media print {
  body { background: white !important; }
  .sidebar, .top-bar, .flow, .hb, #inv-step-select, #inv-step-list,
  .btn, .nav-i, .sb-foot, .role-tag, .pg-desc,
  [onclick*="backToInvList"], [onclick*="goPage"], [onclick*="window.print"] { display: none !important; }
  .main-area { margin-left: 0 !important; }
  .content { padding: 0 !important; max-width: 100% !important; }
  #inv-step-print { display: block !important; }
  .inv-preview, .receipt-preview { box-shadow: none !important; border: none !important; padding: 20px !important; }
  .page { display: none !important; }
  .page.active { display: block !important; }
  .pg-title { display: none !important; }
}
</style>
</head>
<body>

<!-- ============================= LOGIN SCREEN ============================= -->
<div id="login-screen">
  <div class="login-card">
    <div class="login-logo">‡∏ô‡∏ó</div>
    <div class="login-title">‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>
    <div class="login-sub">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>

    <div class="login-role">
      <div class="role-choice sel-mgr" id="rc-mgr" onclick="selectLoginRole('mgr')">üëî ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div>
      <div class="role-choice" id="rc-staff" onclick="selectLoginRole('staff')">üë©‚Äçüíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div>
    </div>

    <div style="font-size:14px;color:var(--text-s);margin-bottom:4px" id="pin-label">‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô 5 ‡∏´‡∏•‡∏±‡∏Å</div>
    <div class="pin-dots" id="pin-dots"></div>
    <div class="login-err" id="pin-err"></div>

    <div class="pin-pad" id="pin-pad">
      <button class="pin-btn" onclick="pinInput('1')">1</button>
      <button class="pin-btn" onclick="pinInput('2')">2</button>
      <button class="pin-btn" onclick="pinInput('3')">3</button>
      <button class="pin-btn" onclick="pinInput('4')">4</button>
      <button class="pin-btn" onclick="pinInput('5')">5</button>
      <button class="pin-btn" onclick="pinInput('6')">6</button>
      <button class="pin-btn" onclick="pinInput('7')">7</button>
      <button class="pin-btn" onclick="pinInput('8')">8</button>
      <button class="pin-btn" onclick="pinInput('9')">9</button>
      <button class="pin-btn clear" onclick="pinClear()">‡∏•‡πâ‡∏≤‡∏á</button>
      <button class="pin-btn" onclick="pinInput('0')">0</button>
      <button class="pin-btn backspace" onclick="pinBack()">‚å´</button>
    </div>
    <div class="login-hint mt-12" id="pin-hint">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£: 5 ‡∏´‡∏•‡∏±‡∏Å ¬∑ ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: 4 ‡∏´‡∏•‡∏±‡∏Å</div>
  </div>
</div>

<!-- ============================= APP ============================= -->
<div class="app" id="app" style="display:none">

<!-- ===== SIDEBAR ===== -->
<div class="sidebar" id="sidebar">
  <div class="sb-head">
    <div class="sb-logo">
      <div class="sb-logo-icon">‡∏ô‡∏ó</div>
      <div>
        <div class="sb-logo-text">‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>
        <div class="sb-logo-sub">Numsub Accounting</div>
      </div>
    </div>
    <div class="sb-role sb-role-mgr" id="sb-role-badge">üëî ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div>
  </div>

  <!-- Manager Nav -->
  <div id="nav-mgr">
    <div class="nav-sec">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
    <button class="nav-i active" onclick="goPage('mgr-dash')"><span class="nav-icon">üìä</span>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
    <button class="nav-i" onclick="goPage('mgr-cust')"><span class="nav-icon">üë•</span>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
    <button class="nav-i" onclick="goPage('mgr-entry')"><span class="nav-icon">‚úèÔ∏è</span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
    <div class="nav-sec">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</div>
    <button class="nav-i" onclick="goPage('mgr-approve')"><span class="nav-icon">‚úÖ</span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÄ‡∏á‡∏¥‡∏ô<span class="nav-badge">3</span></button>
    <div class="nav-sec">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</div>
    <button class="nav-i" onclick="goPage('mgr-report')"><span class="nav-icon">üìã</span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</button>
  </div>

  <!-- Staff Nav -->
  <div id="nav-staff" style="display:none">
    <div class="nav-sec">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
    <button class="nav-i active" onclick="goPage('staff-dash')"><span class="nav-icon">üìä</span>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</button>
    <button class="nav-i" onclick="goPage('staff-cust')"><span class="nav-icon">üë•</span>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
    <div class="nav-sec">‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Å‡πá‡∏ö</div>
    <button class="nav-i" onclick="goPage('staff-inv')"><span class="nav-icon">üìÑ</span>‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</button>
    <button class="nav-i" onclick="goPage('staff-collect')"><span class="nav-icon">üí∞</span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞</button>
    <button class="nav-i" onclick="goPage('staff-submit')"><span class="nav-icon">üì§</span>‡∏™‡πà‡∏á‡πÄ‡∏á‡∏¥‡∏ô/‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥<span class="nav-badge nav-badge-o">2</span></button>
    <div class="nav-sec">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</div>
    <button class="nav-i" onclick="goPage('staff-report')"><span class="nav-icon">üìã</span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</button>
    <button class="nav-i" onclick="goPage('staff-history')"><span class="nav-icon">üïê</span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</button>
  </div>

  <div class="sb-foot">
    <button class="sb-logout" onclick="logout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
  </div>
</div>

<!-- ===== MAIN ===== -->
<div class="main-area">

<!-- ============ MGR: DASHBOARD ============ -->
<div class="page active" id="page-mgr-dash">
  <div class="top-bar"><div><div class="pg-title">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div><div class="pg-desc">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ¬∑ ‡∏°.‡∏Ñ. 2569</div></div><div class="role-tag role-tag-mgr">üëî ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div></div>
  <div class="content">
    <div class="stats" id="mgr-stats">
      <div class="stat"><div class="stat-label">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div><div class="stat-val" id="mgr-s-cust">‚Äî</div><div class="stat-sub">‡∏£‡∏≤‡∏¢</div></div>
      <div class="stat"><div class="stat-label">‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div><div class="stat-val" style="color:var(--blue)" id="mgr-s-billed">‚Äî</div><div class="stat-sub" id="mgr-s-billed-sub"></div></div>
      <div class="stat"><div class="stat-label">‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß</div><div class="stat-val" style="color:var(--green)" id="mgr-s-paid">‚Äî</div><div class="stat-sub" id="mgr-s-paid-pct"></div></div>
      <div class="stat"><div class="stat-label">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div><div class="stat-val" style="color:var(--orange)" id="mgr-s-pending">‚Äî</div><div class="stat-sub" id="mgr-s-pending-sub"></div></div>
    </div>
    <div class="flex gap-24">
      <div class="card" style="flex:1"><div class="card-head"><div class="card-t">üî¥ ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div></div><div class="tbl-w"><table><thead><tr><th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th class="text-r">‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á</th><th>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th></tr></thead><tbody id="mgr-outstanding-tb">
        <tr><td colspan="3" style="text-align:center;color:var(--text-m);padding:24px">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td></tr>
      </tbody></table></div></div>
      <div class="card" style="flex:1"><div class="card-head"><div class="card-t">‚è≥ ‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div><button class="btn btn-sm btn-mgr" onclick="goPage('mgr-approve')">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Üí</button></div><div class="card-body" id="mgr-pending-list">
        <div style="text-align:center;color:var(--text-m);padding:24px">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
      </div></div>
    </div>
  </div>
</div>

<!-- ============ MGR: CUSTOMERS ============ -->
<div class="page" id="page-mgr-cust">
  <div class="top-bar"><div><div class="pg-title">üë• ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div><div class="pg-desc">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div></div><button class="btn btn-p" onclick="openModal('add-cust')">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button></div>
  <div class="content">
    <div class="search-lg"><span class="search-lg-icon">üîç</span><input placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏£‡∏´‡∏±‡∏™ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." oninput="filterCustTable(this.value,'mgr-cust-tb')" /></div>
    <div class="card"><div class="tbl-w"><table><thead><tr><th>‡∏£‡∏´‡∏±‡∏™</th><th>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</th><th class="text-r">‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£/‡∏î.</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th class="text-r">‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á</th><th></th></tr></thead>
    <tbody id="mgr-cust-tb">
      <tr><td colspan="7" style="text-align:center;color:var(--text-m);padding:24px">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td></tr>
    </tbody></table></div></div>
  </div>
</div>

<!-- ============ MGR: ENTRY (LARGE UI) ============ -->
<div class="page" id="page-mgr-entry">
  <div class="top-bar"><div><div class="pg-title">‚úèÔ∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><div class="pg-desc">‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ/‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡πâ‡∏ß</div></div><div class="role-tag role-tag-mgr">üëî ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</div></div>
  <div class="content mgr-form">

    <!-- Large month/date selection -->
    <div class="card mb-24"><div class="card-body">
      <div class="form-grid" style="grid-template-columns:1fr 1fr">
        <div class="form-group"><label class="form-label">üìÖ ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ</label><select class="form-select" id="entry-month" onchange="onEntryMonthChange()"><option value="‡∏°.‡∏Ñ. 69" selected>‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2569</option><option value="‡∏Å.‡∏û. 69">‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2569</option><option value="‡∏ò.‡∏Ñ. 68">‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2568</option></select></div>
        <div class="form-group"><label class="form-label">üìÜ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</label><input type="date" class="form-input" value="2026-01-23" /></div>
      </div>
    </div></div>

    <!-- Customer search LARGE -->
    <div class="form-group mb-16">
      <label class="form-label" style="font-size:16px">üîç ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
    </div>
    <div class="search-lg">
      <span class="search-lg-icon">üë§</span>
      <input placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." id="mgr-cust-search" oninput="filterEntrySearch(this.value)" onfocus="document.getElementById('search-results').classList.add('show')" onblur="setTimeout(()=>document.getElementById('search-results').classList.remove('show'),200)" />
      <div class="search-lg-results" id="search-results">
        <div style="padding:14px 20px;color:var(--text-m);text-align:center">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...</div>
      </div>
    </div>

    <!-- Entry area: appears after selecting customer -->
    <div id="entry-area" style="display:none">

      <!-- Selected customer info -->
      <div class="hb hb-purple mb-16 flex items-c jc-b" id="selected-cust-info">
        <div class="flex items-c gap-16">
          <span style="font-size:32px">üë§</span>
          <div>
            <div style="font-weight:700;font-size:20px" id="sel-cust-name">SN0005 ‚Äî ‡∏´‡∏à‡∏Å.A</div>
            <div style="font-size:14px;color:var(--text-s)" id="sel-cust-sub">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î: ‡∏°.‡∏Ñ. 2569</div>
          </div>
        </div>
        <button class="btn btn-o btn-sm" onclick="resetEntryArea()">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
      </div>

      <!-- ===== BANNER: ‡∏û‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô (shown when has-prev) ===== -->
      <div id="prev-month-banner" style="display:none;background:linear-gradient(135deg,var(--blue-l),var(--green-l));border:2px solid var(--green);border-radius:var(--rl);padding:20px 24px;margin-bottom:20px">
        <div class="flex items-c jc-b" style="margin-bottom:12px">
          <div>
            <div style="font-weight:700;font-size:16px;color:var(--green)">üìã ‡∏û‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô (<span id="prev-month-label">‡∏ò.‡∏Ñ. 68</span>)</div>
            <div style="font-size:13px;color:var(--text-s);margin-top:4px">‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏∂‡∏á‡∏¢‡∏≠‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á</div>
          </div>
          <div style="text-align:right">
            <div class="mono" style="font-size:26px;font-weight:700;color:var(--green)" id="prev-month-total">‡∏ø4,300</div>
            <div style="font-size:11px;color:var(--text-s)">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô</div>
          </div>
        </div>
        <div class="flex gap-8">
          <button class="btn btn-g btn-lg" style="flex:1" onclick="fillAllPrev()">‚úÖ ‡∏Ñ‡∏á‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
          <button class="btn btn-o btn-lg" onclick="document.getElementById('prev-month-banner').style.display='none'">‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á</button>
        </div>
      </div>

      <!-- ===== BANNER: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà (shown when no-prev) ===== -->
      <div id="new-cust-banner" style="display:none;background:var(--surface-alt);border:2px dashed var(--border);border-radius:var(--rl);padding:20px 24px;margin-bottom:20px;text-align:center">
        <div style="font-size:28px;margin-bottom:8px">üÜï</div>
        <div style="font-weight:700;font-size:15px;color:var(--text-s)">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</div>
        <div style="font-size:13px;color:var(--text-m);margin-top:4px">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡πÉ‡∏´‡∏°‡πà ‚Äî ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏¢‡∏≠‡∏î‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
      </div>

      <!-- Service inputs -->
      <div class="card"><div class="card-head"><div class="card-t" style="font-size:18px">üìù ‡πÉ‡∏™‡πà‡∏¢‡∏≠‡∏î ‚Äî <span id="entry-month-title">‡∏°.‡∏Ñ. 2569</span></div><div id="entry-svc-actions"><button class="btn btn-sm btn-o" onclick="clearAllSvc()">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button></div></div><div class="card-body">
        <div style="font-size:15px;font-weight:700;color:var(--text-s);margin-bottom:16px">üìÖ ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>

        <div class="svc-row-lg" data-svc="accounting"><div class="svc-name-lg">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><div style="flex:1"></div><div class="svc-prev" style="display:none"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="vat"><div class="svc-name-lg">‡∏†‡∏û 30</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><div style="flex:1"></div><div class="svc-prev" style="display:none"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="wht"><div class="svc-name-lg">‡∏†‡∏á‡∏î 3,53</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><div style="flex:1"></div><div class="svc-prev" style="display:none"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="sbt"><div class="svc-name-lg">‡∏†‡∏ò 40</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><div style="flex:1"></div><div class="svc-prev" style="display:none"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="pnd90"><div class="svc-name-lg">‡∏†‡∏á‡∏î 90</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><div style="flex:1"></div><div class="svc-prev" style="display:none"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="pnd94"><div class="svc-name-lg">‡∏†‡∏á‡∏î 94</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><div style="flex:1"></div><div class="svc-prev" style="display:none"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="other"><div class="svc-name-lg">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div><input class="form-input" style="flex:1;font-size:16px;padding:10px 14px" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..." /><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>

        <div style="font-size:15px;font-weight:700;color:var(--text-s);margin:24px 0 16px">üìÜ ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</div>
        <div class="svc-row-lg" data-svc="audit"><div class="svc-name-lg">‡∏Ñ‡πà‡∏≤‡∏™‡∏≠‡∏ö ‡∏ö‡∏ä</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</div><div style="flex:1"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="pnd51"><div class="svc-name-lg">‡∏†‡∏á‡∏î 51</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</div><div style="flex:1"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>
        <div class="svc-row-lg" data-svc="pnd50"><div class="svc-name-lg">‡∏†‡∏á‡∏î 50</div><div class="svc-type-tag">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</div><div style="flex:1"></div><input class="svc-input-lg" placeholder="0" oninput="updateEntryTotal()" /></div>

        <!-- Total LARGE -->
        <div style="margin-top:24px;padding:24px;background:var(--surface-alt);border-radius:var(--r);border:2px solid var(--border);display:flex;justify-content:space-between;align-items:center">
          <div><div style="font-size:16px;color:var(--text-s)">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° <span id="entry-total-label">‡∏°.‡∏Ñ. 2569</span></div><div style="font-size:13px;color:var(--text-m);margin-top:4px" id="entry-item-count">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div></div>
          <div class="mono" style="font-size:36px;font-weight:700;color:var(--accent)" id="entry-total-val">‡∏ø0</div>
        </div>

        <div class="flex mt-24" style="justify-content:flex-end;gap:12px">
          <button class="btn btn-o btn-lg" onclick="resetEntryArea()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
          <button class="btn btn-p btn-lg" onclick="saveEntry()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î</button>
        </div>
      </div></div>
    </div><!-- /entry-area -->

  </div>
</div>

<!-- ============ MGR: APPROVE ============ -->
<div class="page" id="page-mgr-approve">
  <div class="top-bar"><div><div class="pg-title">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÄ‡∏á‡∏¥‡∏ô</div><div class="pg-desc">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div></div><div class="role-tag role-tag-mgr">üëî ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</div></div>
  <div class="content">
    <div class="in-tabs mb-24"><button class="in-tab active" onclick="switchInTab(this,'approve-pending')">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (3)</button><button class="in-tab" onclick="switchInTab(this,'approve-done')">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</button><button class="in-tab" onclick="switchInTab(this,'approve-reject')">‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button></div>

    <div id="approve-pending">
    <!-- Approval 1: with slip image -->
    <div class="approval-card pending">
      <div class="flex items-c jc-b" style="margin-bottom:12px">
        <div><div style="font-weight:700;font-size:15px">‡∏´‡∏à‡∏Å.A (SN0005)</div><div style="font-size:12px;color:var(--text-s)">INV-2569-0023 ¬∑ 6 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div></div>
        <div class="text-r"><div class="mono" style="font-size:20px;font-weight:700;color:var(--accent)">‡∏ø10,800</div><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:16px;padding:14px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-bottom:12px;font-size:12px">
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</div><div style="font-weight:600;margin-top:3px">üè¶ ‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</div><div style="font-weight:600;margin-top:3px">‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö</div><div style="font-weight:600;margin-top:3px">6 ‡∏Å.‡∏û. 2569</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div><div style="font-weight:600;margin-top:3px">‡∏™‡∏°‡∏®‡∏£‡∏µ</div></div>
      </div>

      <!-- IMAGE ATTACHMENT -->
      <div style="margin-bottom:12px">
        <div style="font-size:11px;color:var(--text-m);text-transform:uppercase;letter-spacing:.4px;margin-bottom:8px">üìé ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÅ‡∏ô‡∏ö</div>
        <div style="display:flex;gap:8px">
          <div style="position:relative" onclick="openImgViewer('https://placehold.co/400x600/eee/999?text=‡∏™‡∏•‡∏¥‡∏õ+‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô%0A‡∏´‡∏à‡∏Å.A%0A‡∏ø10,800')">
            <img src="https://placehold.co/120x80/f5f0e8/6b5b45?text=‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô" class="approval-img" />
            <div style="position:absolute;bottom:4px;right:4px;background:rgba(0,0,0,.6);color:white;font-size:9px;padding:2px 6px;border-radius:3px">üîç ‡∏Ç‡∏¢‡∏≤‡∏¢</div>
          </div>
        </div>
      </div>
      <div style="font-size:12px;color:var(--text-s)">üí¨ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô KBank ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 6 ‡∏Å.‡∏û.</div>
      <div class="flex gap-8 mt-12"><button class="btn btn-g">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button><button class="btn btn-danger btn-sm">‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button><button class="btn btn-ghost btn-sm">üí¨ ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button></div>
    </div>

    <!-- Approval 2: Cash -->
    <div class="approval-card pending">
      <div class="flex items-c jc-b" style="margin-bottom:12px">
        <div><div style="font-weight:700;font-size:15px">‡∏´‡πâ‡∏≤‡∏á 1 (SN0007)</div><div style="font-size:12px;color:var(--text-s)">INV-2569-0021 ¬∑ 3 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div></div>
        <div class="text-r"><div class="mono" style="font-size:20px;font-weight:700;color:var(--accent)">‡∏ø3,530</div><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:16px;padding:14px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-bottom:12px;font-size:12px">
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</div><div style="font-weight:600;margin-top:3px">üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</div><div style="font-weight:600;margin-top:3px">‚Äî</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö</div><div style="font-weight:600;margin-top:3px">5 ‡∏Å.‡∏û. 2569</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div><div style="font-weight:600;margin-top:3px">‡∏™‡∏°‡∏®‡∏£‡∏µ</div></div>
      </div>
      <div style="font-size:12px;color:var(--text-s)">üí¨ ‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô</div>
      <div style="font-size:11px;color:var(--text-m);margin-top:4px">üìé ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÅ‡∏ô‡∏ö</div>
      <div class="flex gap-8 mt-12"><button class="btn btn-g">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button><button class="btn btn-danger btn-sm">‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button><button class="btn btn-ghost btn-sm">üí¨ ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button></div>
    </div>

    <!-- Approval 3: Cheque with image -->
    <div class="approval-card pending">
      <div class="flex items-c jc-b" style="margin-bottom:12px">
        <div><div style="font-weight:700;font-size:15px">‡∏´‡πâ‡∏≤‡∏á 3 (MN0105)</div><div style="font-size:12px;color:var(--text-s)">INV-2569-0019 ¬∑ ‡∏ä‡∏≥‡∏£‡∏∞‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô</div></div>
        <div class="text-r"><div class="mono" style="font-size:20px;font-weight:700;color:var(--accent)">‡∏ø1,470</div><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:16px;padding:14px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-bottom:12px;font-size:12px">
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</div><div style="font-weight:600;margin-top:3px">üìù ‡πÄ‡∏ä‡πá‡∏Ñ</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</div><div style="font-weight:600;margin-top:3px">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û (BBL)</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πá‡∏Ñ</div><div style="font-weight:600;margin-top:3px;font-family:'JetBrains Mono',monospace">CHQ-4481920</div></div>
        <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div><div style="font-weight:600;margin-top:3px">‡∏ß‡∏¥‡∏ä‡∏±‡∏¢</div></div>
      </div>
      <div style="margin-bottom:12px">
        <div style="font-size:11px;color:var(--text-m);text-transform:uppercase;letter-spacing:.4px;margin-bottom:8px">üìé ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÅ‡∏ô‡∏ö</div>
        <div style="display:flex;gap:8px">
          <div style="position:relative" onclick="openImgViewer('https://placehold.co/400x250/eee/999?text=‡∏†‡∏≤‡∏û‡πÄ‡∏ä‡πá‡∏Ñ%0ABBL%0ACHQ-4481920%0A‡∏ø1,470')">
            <img src="https://placehold.co/120x80/e8f0f7/3a6a8a?text=‡∏†‡∏≤‡∏û‡πÄ‡∏ä‡πá‡∏Ñ" class="approval-img" />
            <div style="position:absolute;bottom:4px;right:4px;background:rgba(0,0,0,.6);color:white;font-size:9px;padding:2px 6px;border-radius:3px">üîç ‡∏Ç‡∏¢‡∏≤‡∏¢</div>
          </div>
        </div>
      </div>
      <div class="flex gap-8 mt-12"><button class="btn btn-g">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button><button class="btn btn-danger btn-sm">‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button><button class="btn btn-ghost btn-sm">üí¨ ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button></div>
    </div>
    </div><!-- /approve-pending -->

    <div id="approve-done" style="display:none">
      <div class="approval-card approved"><div class="flex items-c jc-b"><div><div style="font-weight:700">‡∏ö‡∏à‡∏Å. ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç (SN0006)</div><div style="font-size:12px;color:var(--text-s)">INV-2569-0020 ¬∑ 4 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ¬∑ ‡πÇ‡∏≠‡∏ô SCB</div></div><div class="text-r"><div class="mono" style="font-size:18px;font-weight:700">‡∏ø8,500</div><span class="badge b-green"><span class="dot"></span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</span></div></div><div style="font-size:11px;color:var(--text-s);margin-top:8px">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠ 3 ‡∏Å.‡∏û. 2569 ¬∑ ‡πÇ‡∏î‡∏¢ ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div></div>
      <div class="approval-card approved"><div class="flex items-c jc-b"><div><div style="font-weight:700">‡∏´‡πâ‡∏≤‡∏á 3 (MN0105)</div><div style="font-size:12px;color:var(--text-s)">INV-2569-0018 ¬∑ 4 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ¬∑ ‡πÄ‡∏ä‡πá‡∏Ñ BBL</div></div><div class="text-r"><div class="mono" style="font-size:18px;font-weight:700">‡∏ø4,500</div><span class="badge b-green"><span class="dot"></span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</span></div></div><div style="font-size:11px;color:var(--text-s);margin-top:8px">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠ 1 ‡∏Å.‡∏û. 2569 ¬∑ ‡πÇ‡∏î‡∏¢ ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div></div>
    </div>

    <div id="approve-reject" style="display:none">
      <div style="text-align:center;padding:40px;color:var(--text-m)">
        <div style="font-size:32px;margin-bottom:12px">üì≠</div>
        <div style="font-size:14px">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div>
      </div>
    </div>

  </div>
</div>

<!-- ============ MGR: REPORT ============ -->
<div class="page" id="page-mgr-report">
  <div class="top-bar"><div><div class="pg-title">üìã ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</div><div class="pg-desc">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞/‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</div></div><div class="flex gap-8"><select class="form-select"><option>‡∏°.‡∏Ñ. 2569</option><option>‡∏ò.‡∏Ñ. 2568</option></select><button class="btn btn-o btn-sm">üì• Export</button></div></div>
  <div class="content" id="report-content-mgr">
    <div class="stats mb-24">
      <div class="stat"><div class="stat-label">‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Å‡πá‡∏ö</div><div class="stat-val" style="color:var(--blue)">‡∏ø68,500</div></div>
      <div class="stat"><div class="stat-label">‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</div><div class="stat-val" style="color:var(--green)">‡∏ø42,300</div></div>
      <div class="stat"><div class="stat-label">‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</div><div class="stat-val" style="color:var(--red)">‡∏ø26,200</div></div>
      <div class="stat"><div class="stat-label">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ</div><div class="stat-val" style="color:var(--green)">61.8%</div></div>
    </div>

    <!-- Report Filter Tabs -->
    <div class="card mb-24"><div class="card-body" style="padding:16px 24px">
      <div class="flex items-c gap-16">
        <div style="font-size:13px;font-weight:600;color:var(--text-s)">‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á:</div>
        <div class="flex gap-8">
          <button class="btn btn-p btn-sm" id="view-by-cust" onclick="switchReportView('cust')">üìä ‡∏£‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
          <button class="btn btn-o btn-sm" id="view-by-tax" onclick="switchReportView('tax')">üìë ‡∏£‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ</button>
          <button class="btn btn-o btn-sm" id="view-by-one" onclick="switchReportView('one')">üë§ ‡πÄ‡∏à‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
        </div>
        <div style="margin-left:auto;display:none" id="cust-select-wrap">
          <select class="form-select" id="report-cust-sel" style="font-size:13px"><option>‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‚Äî</option><option>SN0005 ‡∏´‡∏à‡∏Å.A</option><option>SN0006 ‡∏ö‡∏à‡∏Å. ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç</option><option>SN0007 ‡∏´‡πâ‡∏≤‡∏á 1</option></select>
        </div>
      </div>
    </div></div>

    <!-- View: By Customer -->
    <div class="card" id="report-by-cust">
      <div class="card-head"><div class="card-t">‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‚Äî ‡∏°.‡∏Ñ. 2569</div></div>
      <div class="tbl-w"><table><thead><tr><th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th class="text-r">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</th><th class="text-r">‡∏†‡∏û 30</th><th class="text-r">‡∏†‡∏á‡∏î 3,53</th><th class="text-r">‡∏†‡∏ò 40</th><th class="text-r">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</th><th class="text-r" style="font-weight:700">‡∏£‡∏ß‡∏°</th><th class="text-r" style="color:var(--green)">‡∏ä‡∏≥‡∏£‡∏∞</th><th class="text-r" style="color:var(--red)">‡∏Ñ‡πâ‡∏≤‡∏á</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr></thead>
      <tbody>
        <tr><td><strong>‡∏´‡∏à‡∏Å.A</strong></td><td class="text-r mono">3,000</td><td class="text-r mono">1,200</td><td class="text-r mono">600</td><td class="text-r mono">‚Äî</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="font-weight:700">4,800</td><td class="text-r mono" style="color:var(--green)">4,800</td><td class="text-r mono">0</td><td><span class="badge b-green"><span class="dot"></span>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</span></td></tr>
        <tr><td><strong>‡∏ö‡∏à‡∏Å. ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç</strong></td><td class="text-r mono">5,000</td><td class="text-r mono">2,000</td><td class="text-r mono">800</td><td class="text-r mono">700</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="font-weight:700">8,500</td><td class="text-r mono" style="color:var(--green)">8,500</td><td class="text-r mono">0</td><td><span class="badge b-green"><span class="dot"></span>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</span></td></tr>
        <tr><td><strong>‡∏´‡πâ‡∏≤‡∏á 1</strong></td><td class="text-r mono">2,000</td><td class="text-r mono">800</td><td class="text-r mono">730</td><td class="text-r mono">‚Äî</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="font-weight:700">3,530</td><td class="text-r mono" style="color:var(--orange)">0</td><td class="text-r mono" style="color:var(--red)">3,530</td><td><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></td></tr>
        <tr><td><strong>‡∏´‡πâ‡∏≤‡∏á 2</strong></td><td class="text-r mono">3,500</td><td class="text-r mono">1,500</td><td class="text-r mono">700</td><td class="text-r mono">500</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="font-weight:700">6,200</td><td class="text-r mono">0</td><td class="text-r mono" style="color:var(--red)">6,200</td><td><span class="badge b-red"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</span></td></tr>
      </tbody>
      <tfoot><tr style="background:var(--surface-alt);font-weight:700"><td>‡∏£‡∏ß‡∏°</td><td class="text-r mono">13,500</td><td class="text-r mono">5,500</td><td class="text-r mono">2,830</td><td class="text-r mono">1,200</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="color:var(--accent)">23,030</td><td class="text-r mono" style="color:var(--green)">13,300</td><td class="text-r mono" style="color:var(--red)">9,730</td><td></td></tr></tfoot></table></div>
    </div>

    <!-- View: By Tax Type -->
    <div class="card" id="report-by-tax" style="display:none">
      <div class="card-head"><div class="card-t">‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ ‚Äî ‡∏°.‡∏Ñ. 2569</div></div>
      <div class="tbl-w"><table><thead><tr><th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</th><th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th><th class="text-r">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th class="text-r">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th><th class="text-r" style="color:var(--green)">‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</th><th class="text-r" style="color:var(--red)">‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</th><th class="text-r">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö</th></tr></thead>
      <tbody>
        <tr><td><strong>‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</strong></td><td>‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</td><td class="text-r">8</td><td class="text-r mono" style="font-weight:700">‡∏ø28,000</td><td class="text-r mono" style="color:var(--green)">‡∏ø16,000</td><td class="text-r mono" style="color:var(--red)">‡∏ø12,000</td><td class="text-r">57.1%</td></tr>
        <tr><td><strong>‡∏†‡∏û 30</strong></td><td>‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</td><td class="text-r">6</td><td class="text-r mono" style="font-weight:700">‡∏ø12,500</td><td class="text-r mono" style="color:var(--green)">‡∏ø8,200</td><td class="text-r mono" style="color:var(--red)">‡∏ø4,300</td><td class="text-r">65.6%</td></tr>
        <tr><td><strong>‡∏†‡∏á‡∏î 3,53</strong></td><td>‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</td><td class="text-r">7</td><td class="text-r mono" style="font-weight:700">‡∏ø8,800</td><td class="text-r mono" style="color:var(--green)">‡∏ø5,900</td><td class="text-r mono" style="color:var(--red)">‡∏ø2,900</td><td class="text-r">67.0%</td></tr>
        <tr><td><strong>‡∏†‡∏ò 40</strong></td><td>‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</td><td class="text-r">4</td><td class="text-r mono" style="font-weight:700">‡∏ø5,200</td><td class="text-r mono" style="color:var(--green)">‡∏ø3,200</td><td class="text-r mono" style="color:var(--red)">‡∏ø2,000</td><td class="text-r">61.5%</td></tr>
        <tr><td><strong>‡∏Ñ‡πà‡∏≤‡∏™‡∏≠‡∏ö ‡∏ö‡∏ä</strong></td><td>‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</td><td class="text-r">2</td><td class="text-r mono" style="font-weight:700">‡∏ø14,000</td><td class="text-r mono" style="color:var(--green)">‡∏ø9,000</td><td class="text-r mono" style="color:var(--red)">‡∏ø5,000</td><td class="text-r">64.3%</td></tr>
      </tbody>
      <tfoot><tr style="background:var(--surface-alt);font-weight:700"><td>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</td><td></td><td class="text-r">‚Äî</td><td class="text-r mono" style="color:var(--accent)">‡∏ø68,500</td><td class="text-r mono" style="color:var(--green)">‡∏ø42,300</td><td class="text-r mono" style="color:var(--red)">‡∏ø26,200</td><td class="text-r">61.8%</td></tr></tfoot></table></div>
    </div>

    <!-- View: By Single Customer -->
    <div class="card" id="report-by-one" style="display:none">
      <div class="card-head"><div class="card-t">üìä ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Äî ‡∏´‡∏à‡∏Å.A (SN0005)</div></div>
      <div class="tbl-w"><table><thead><tr><th>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th><th class="text-r">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</th><th class="text-r">‡∏†‡∏û 30</th><th class="text-r">‡∏†‡∏á‡∏î 3,53</th><th class="text-r">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</th><th class="text-r" style="font-weight:700">‡∏£‡∏ß‡∏°</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr></thead>
      <tbody>
        <tr><td>‡∏°.‡∏Ñ. 69</td><td class="text-r mono">3,000</td><td class="text-r mono">1,200</td><td class="text-r mono">600</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="font-weight:700">4,800</td><td><span class="badge b-green"><span class="dot"></span>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</span></td></tr>
        <tr><td>‡∏ò.‡∏Ñ. 68</td><td class="text-r mono">3,000</td><td class="text-r mono">800</td><td class="text-r mono">500</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="font-weight:700">4,300</td><td><span class="badge b-green"><span class="dot"></span>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</span></td></tr>
        <tr><td>‡∏û.‡∏¢. 68</td><td class="text-r mono">3,000</td><td class="text-r mono">750</td><td class="text-r mono">500</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="font-weight:700">4,250</td><td><span class="badge b-green"><span class="dot"></span>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</span></td></tr>
      </tbody>
      <tfoot><tr style="background:var(--surface-alt);font-weight:700"><td>‡∏£‡∏ß‡∏° 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</td><td class="text-r mono">9,000</td><td class="text-r mono">2,750</td><td class="text-r mono">1,600</td><td class="text-r mono">‚Äî</td><td class="text-r mono" style="color:var(--accent)">13,350</td><td></td></tr></tfoot></table></div>
    </div>
  </div>
</div>

<!-- ============ STAFF: DASHBOARD ============ -->
<div class="page" id="page-staff-dash">
  <div class="top-bar"><div><div class="pg-title">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div><div class="pg-desc" id="staff-dash-desc">‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Å‡πá‡∏ö</div></div><div class="role-tag role-tag-staff" id="staff-role-name">üë©‚Äçüíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div></div>
  <div class="content">
    <div class="stats" id="staff-stats">
      <div class="stat"><div class="stat-label">‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏≠‡πÄ‡∏Å‡πá‡∏ö</div><div class="stat-val" style="color:var(--blue)" id="stf-s-inv">‚Äî</div><div class="stat-sub">‡πÉ‡∏ö</div></div>
      <div class="stat"><div class="stat-label">‡∏¢‡∏≠‡∏î‡∏£‡∏≠‡πÄ‡∏Å‡πá‡∏ö</div><div class="stat-val" style="color:var(--orange)" id="stf-s-wait">‚Äî</div></div>
      <div class="stat"><div class="stat-label">‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div><div class="stat-val" style="color:var(--green)" id="stf-s-done">‚Äî</div></div>
      <div class="stat"><div class="stat-label">‡∏£‡∏≠‡∏ú‡∏à‡∏Å.‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div><div class="stat-val" style="color:var(--orange)" id="stf-s-pend">‚Äî</div></div>
    </div>
    <div class="card"><div class="card-head"><div class="card-t">üìÑ ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏≠‡πÄ‡∏Å‡πá‡∏ö</div></div><div class="tbl-w"><table><thead><tr><th>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th><th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th>‡∏Å‡∏≥‡∏´‡∏ô‡∏î</th><th class="text-r">‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th></th></tr></thead>
    <tbody id="staff-inv-tb">
      <tr><td colspan="6" style="text-align:center;color:var(--text-m);padding:24px">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td></tr>
    </tbody></table></div></div>
  </div>
</div>

<!-- ============ STAFF: CUSTOMERS (read + add only) ============ -->
<div class="page" id="page-staff-cust">
  <div class="top-bar"><div><div class="pg-title">üë• ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div><div class="pg-desc">‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</div></div><button class="btn btn-p" onclick="openModal('add-cust')">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</button></div>
  <div class="content">
    <div class="hb hb-orange mb-16 flex items-c gap-8" style="font-size:13px;color:var(--orange)">‚ö†Ô∏è ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ <strong>‡πÄ‡∏û‡∏¥‡πà‡∏°</strong> ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ <strong>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</strong> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà (‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£)</div>
    <div class="search-lg mb-16"><span class="search-lg-icon">üîç</span><input placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." oninput="filterCustTable(this.value,'staff-cust-tb')" /></div>
    <div class="card"><div class="tbl-w"><table><thead><tr><th>‡∏£‡∏´‡∏±‡∏™</th><th>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</th><th class="text-r">‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£/‡∏î.</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th class="text-r">‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á</th></tr></thead>
    <tbody id="staff-cust-tb">
      <tr><td colspan="6" style="text-align:center;color:var(--text-m);padding:24px">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td></tr>
    </tbody></table></div></div>
  </div>
</div>

<!-- ============ STAFF: INVOICE ============ -->
<div class="page" id="page-staff-inv">
  <div class="top-bar"><div><div class="pg-title">üìÑ ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div><div class="pg-desc">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‚Üí ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞ ‚Üí ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div></div><div class="role-tag role-tag-staff">üë©‚Äçüíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div></div>
  <div class="content">
    <div class="flow mb-24"><div class="flow-s active" id="inv-flow-1"><div class="flow-num">1</div>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div><div class="flow-arr">‚Üí</div><div class="flow-s" id="inv-flow-2"><div class="flow-num">2</div>‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏á</div><div class="flow-arr">‚Üí</div><div class="flow-s" id="inv-flow-3"><div class="flow-num">3</div>‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div></div>

    <!-- Step 1: Customer Selection -->
    <div id="inv-step-select">
      <div class="card mb-24">
        <div class="card-head"><div class="card-t" style="font-size:17px">üë§ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div></div>
        <div class="card-body">
          <div class="search-lg" style="margin-bottom:0">
            <span class="search-lg-icon">üîç</span>
            <input placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." id="inv-cust-search" oninput="filterInvCust(this.value)" onfocus="document.getElementById('inv-cust-list').style.display='block'" />
          </div>
        </div>
      </div>

      <!-- Customer list -->
      <div id="inv-cust-list">
        <div class="card">
          <div class="tbl-w">
            <table id="inv-cust-table">
              <thead><tr><th style="width:40px"></th><th>‡∏£‡∏´‡∏±‡∏™</th><th>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th class="text-r">‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</th><th>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr></thead>
              <tbody>
                <tr class="inv-cust-row" onclick="selectInvCust('SN0005','‡∏´‡∏à‡∏Å.A')" style="cursor:pointer">
                  <td style="text-align:center;font-size:18px">üëÜ</td>
                  <td class="mono">SN0005</td>
                  <td><strong>‡∏´‡∏à‡∏Å.A</strong></td>
                  <td class="text-r mono" style="color:var(--red);font-weight:600">‡∏ø15,900</td>
                  <td><span class="badge b-red">3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></td>
                  <td><span class="badge b-red"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</span></td>
                </tr>
                <tr class="inv-cust-row" onclick="selectInvCust('SN0007','‡∏´‡πâ‡∏≤‡∏á 1')" style="cursor:pointer">
                  <td style="text-align:center;font-size:18px">üëÜ</td>
                  <td class="mono">SN0007</td>
                  <td><strong>‡∏´‡πâ‡∏≤‡∏á 1</strong></td>
                  <td class="text-r mono" style="color:var(--orange);font-weight:600">‡∏ø3,530</td>
                  <td><span class="badge b-orange">1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></td>
                  <td><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></td>
                </tr>
                <tr class="inv-cust-row" onclick="selectInvCust('SN0008','‡∏´‡πâ‡∏≤‡∏á 2')" style="cursor:pointer">
                  <td style="text-align:center;font-size:18px">üëÜ</td>
                  <td class="mono">SN0008</td>
                  <td><strong>‡∏´‡πâ‡∏≤‡∏á 2</strong></td>
                  <td class="text-r mono" style="color:var(--red);font-weight:600">‡∏ø18,600</td>
                  <td><span class="badge b-red">3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></td>
                  <td><span class="badge b-red"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</span></td>
                </tr>
                <tr class="inv-cust-row" onclick="selectInvCust('MN0106','‡∏´‡πâ‡∏≤‡∏á 4')" style="cursor:pointer">
                  <td style="text-align:center;font-size:18px">üëÜ</td>
                  <td class="mono">MN0106</td>
                  <td><strong>‡∏´‡πâ‡∏≤‡∏á 4</strong></td>
                  <td class="text-r mono" style="color:var(--red);font-weight:600">‡∏ø23,400</td>
                  <td><span class="badge b-red">3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></td>
                  <td><span class="badge b-red"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</span></td>
                </tr>
                <tr class="inv-cust-row" onclick="selectInvCust('MV58792','‡∏´‡πâ‡∏≤‡∏á 8')" style="cursor:pointer">
                  <td style="text-align:center;font-size:18px">üëÜ</td>
                  <td class="mono">MV58792</td>
                  <td><strong>‡∏´‡πâ‡∏≤‡∏á 8</strong></td>
                  <td class="text-r mono" style="color:var(--red);font-weight:600">‡∏ø16,500</td>
                  <td><span class="badge b-red">2 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></td>
                  <td><span class="badge b-red"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div style="text-align:center;margin-top:16px;font-size:13px;color:var(--text-m)">üëÜ ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</div>
      </div>
    </div>

    <!-- Step 2: ALL unpaid items (no selection - mandatory all) -->
    <div id="inv-step-list" style="display:none">
      <div class="hb hb-purple mb-24 flex items-c jc-b">
        <div class="flex items-c gap-12">
          <span style="font-size:24px">üë§</span>
          <div>
            <div style="font-weight:700;font-size:17px" id="inv-sel-name">SN0008 ‚Äî ‡∏´‡πâ‡∏≤‡∏á 2</div>
            <div style="font-size:13px;color:var(--text-s)" id="inv-sel-info">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
          </div>
        </div>
        <button class="btn btn-o" onclick="backToInvSelect()">‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
      </div>

      <div class="card mb-24">
        <div class="card-head"><div class="card-t" style="font-size:16px">üìÑ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Äî ‡∏≠‡∏≠‡∏Å‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div></div>
        <div class="tbl-w">
          <table>
            <thead><tr><th>#</th><th>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ</th><th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th><th class="text-r">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th></tr></thead>
            <tbody>
              <tr style="background:var(--surface-alt)"><td colspan="4" style="font-weight:700;font-size:13px;color:var(--text-s);padding:8px 14px">üìÖ ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568 <span class="badge b-red" style="font-size:10px;margin-left:8px"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></td></tr>
              <tr><td>1</td><td class="mono">‡∏û.‡∏¢. 68</td><td>‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</td><td class="text-r mono" style="font-weight:600">3,500.00</td></tr>
              <tr><td>2</td><td class="mono">‡∏û.‡∏¢. 68</td><td>‡∏†‡∏û 30</td><td class="text-r mono" style="font-weight:600">1,500.00</td></tr>
              <tr><td>3</td><td class="mono">‡∏û.‡∏¢. 68</td><td>‡∏†‡∏á‡∏î 3,53</td><td class="text-r mono" style="font-weight:600">700.00</td></tr>
              <tr><td>4</td><td class="mono">‡∏û.‡∏¢. 68</td><td>‡∏†‡∏ò 40</td><td class="text-r mono" style="font-weight:600">500.00</td></tr>

              <tr style="background:var(--surface-alt)"><td colspan="4" style="font-weight:700;font-size:13px;color:var(--text-s);padding:8px 14px">üìÖ ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2568 <span class="badge b-red" style="font-size:10px;margin-left:8px"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á 2 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></td></tr>
              <tr><td>5</td><td class="mono">‡∏ò.‡∏Ñ. 68</td><td>‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</td><td class="text-r mono" style="font-weight:600">3,500.00</td></tr>
              <tr><td>6</td><td class="mono">‡∏ò.‡∏Ñ. 68</td><td>‡∏†‡∏û 30</td><td class="text-r mono" style="font-weight:600">1,500.00</td></tr>
              <tr><td>7</td><td class="mono">‡∏ò.‡∏Ñ. 68</td><td>‡∏†‡∏á‡∏î 3,53</td><td class="text-r mono" style="font-weight:600">700.00</td></tr>
              <tr><td>8</td><td class="mono">‡∏ò.‡∏Ñ. 68</td><td>‡∏†‡∏ò 40</td><td class="text-r mono" style="font-weight:600">500.00</td></tr>

              <tr style="background:var(--surface-alt)"><td colspan="4" style="font-weight:700;font-size:13px;color:var(--text-s);padding:8px 14px">üìÖ ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2569 <span class="badge b-orange" style="font-size:10px;margin-left:8px"><span class="dot"></span>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</span></td></tr>
              <tr><td>9</td><td class="mono">‡∏°.‡∏Ñ. 69</td><td>‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</td><td class="text-r mono" style="font-weight:600">3,500.00</td></tr>
              <tr><td>10</td><td class="mono">‡∏°.‡∏Ñ. 69</td><td>‡∏†‡∏û 30</td><td class="text-r mono" style="font-weight:600">1,500.00</td></tr>
              <tr><td>11</td><td class="mono">‡∏°.‡∏Ñ. 69</td><td>‡∏†‡∏á‡∏î 3,53</td><td class="text-r mono" style="font-weight:600">700.00</td></tr>
              <tr><td>12</td><td class="mono">‡∏°.‡∏Ñ. 69</td><td>‡∏†‡∏ò 40</td><td class="text-r mono" style="font-weight:600">500.00</td></tr>
            </tbody>
            <tfoot><tr style="background:var(--surface-alt);font-weight:700"><td colspan="3" style="font-size:15px;padding:14px">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô (12 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ¬∑ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</td><td class="text-r mono" style="font-size:20px;color:var(--accent)">‡∏ø18,600.00</td></tr></tfoot>
          </table>
        </div>
      </div>

      <div style="display:flex;gap:12px;justify-content:flex-end">
        <button class="btn btn-o btn-lg" onclick="backToInvSelect()">‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
        <button class="btn btn-p btn-lg" onclick="generateInvPreview()">üìÑ ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á / ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</button>
        <button class="btn btn-g btn-lg" onclick="goPage('staff-collect')">üí∞ ‡πÑ‡∏õ‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞ ‚Üí</button>
      </div>
    </div>

    <!-- Step 3: Invoice Print Preview -->
    <div id="inv-step-print" style="display:none">
      <div class="flex items-c jc-b mb-24">
        <button class="btn btn-o" onclick="backToInvList()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        <div class="flex gap-8">
          <button class="btn btn-p btn-lg" onclick="window.print()">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</button>
          <button class="btn btn-g" onclick="goPage('staff-collect')">üí∞ ‡πÑ‡∏õ‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞ ‚Üí</button>
        </div>
      </div>

      <div class="inv-preview" id="inv-print-area">
        <div class="inv-head">
          <div><div class="inv-title">‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div><div class="inv-no" id="inv-print-no">INV-2569-0025</div><div style="font-size:12px;margin-top:4px;color:var(--text-s)">‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div></div>
          <div style="text-align:right"><div class="inv-ml">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å</div><div style="font-weight:600">7 ‡∏Å.‡∏û. 2569</div><div class="inv-ml" style="margin-top:6px">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞</div><div style="font-weight:600">7 ‡∏Å.‡∏û. 2569</div></div>
        </div>
        <div class="inv-grid">
          <div><div class="inv-ml">‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ</div><div style="font-weight:600;font-size:15px" id="inv-print-cust">‡∏´‡πâ‡∏≤‡∏á 2</div><div style="font-size:12px;color:var(--text-s)" id="inv-print-code">‡∏£‡∏´‡∏±‡∏™: SN0008</div></div>
          <div><div class="inv-ml">‡∏≠‡∏≠‡∏Å‡πÇ‡∏î‡∏¢</div><div style="font-weight:600;font-size:15px">‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div></div>
        </div>

        <!-- Dynamic invoice items -->
        <table class="inv-table">
          <thead><tr><th style="text-align:left">#</th><th style="text-align:left">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th><th style="text-align:left">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th><th style="text-align:right">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th></tr></thead>
          <tbody id="inv-print-body">
            <!-- filled by JS -->
          </tbody>
        </table>
        <div style="display:flex;justify-content:flex-end"><div class="inv-total-box"><div style="font-size:11px;opacity:.7">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</div><div style="font-family:'JetBrains Mono',monospace;font-size:26px;font-weight:700" id="inv-print-total">‡∏ø18,600.00</div><div style="font-size:11px;opacity:.7;margin-top:2px" id="inv-print-total-text">(‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏´‡∏°‡∏∑‡πà‡∏ô‡πÅ‡∏õ‡∏î‡∏û‡∏±‡∏ô‡∏´‡∏Å‡∏£‡πâ‡∏≠‡∏¢‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô)</div></div></div>

        <!-- QR + Signature Footer -->
        <div class="inv-footer">
          <div class="qr-section">
            <div style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.4px;color:var(--text-m);margin-bottom:12px">‡∏ä‡∏≥‡∏£‡∏∞‡∏ú‡πà‡∏≤‡∏ô QR Code</div>
            <div class="qr-placeholder">
              <div style="font-size:32px;margin-bottom:4px">üì±</div>
              <div>QR Code</div>
              <div style="font-size:10px">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>
            </div>
            <div style="font-size:11px;color:var(--text-s)">‡∏ò.‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ xxx-x-xxxxx-x</div>
            <div style="font-size:11px;color:var(--text-s)">‡∏ä‡∏∑‡πà‡∏≠: ‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>
          </div>
          <div class="sign-section">
            <div style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.4px;color:var(--text-m);margin-bottom:8px">‡∏•‡∏á‡∏ô‡∏≤‡∏°‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div>
            <div class="sign-line"></div>
            <div class="sign-label">‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö ............................................</div>
            <div class="sign-label" style="margin-top:4px">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ......./......./..........</div>
            <div style="margin-top:16px;padding-top:12px;border-top:1px dashed var(--border)">
              <div style="font-size:11px;font-weight:600;color:var(--text-m);margin-bottom:8px">‡∏£‡∏∞‡∏ö‡∏∏‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
              <div class="pay-check">
                <div class="pay-check-item"><div class="pay-check-box"></div> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</div>
                <div class="pay-check-item"><div class="pay-check-box"></div> ‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô</div>
                <div class="pay-check-item"><div class="pay-check-box"></div> ‡πÄ‡∏ä‡πá‡∏Ñ</div>
              </div>
              <div style="margin-top:8px;font-size:11px;color:var(--text-m)">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ ........................ ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á ........................</div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex mt-24" style="justify-content:center;gap:12px">
        <button class="btn btn-o btn-lg" onclick="backToInvList()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        <button class="btn btn-p btn-lg" onclick="window.print()">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</button>
        <button class="btn btn-g btn-lg" onclick="goPage('staff-collect')">üí∞ ‡πÑ‡∏õ‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞ ‚Üí</button>
      </div>
    </div>

  </div>
</div>

<!-- ============ STAFF: COLLECT ============ -->
<div class="page" id="page-staff-collect">
  <div class="top-bar"><div><div class="pg-title">üí∞ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div><div class="pg-desc">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞ ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‚Üí ‡∏™‡πà‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div></div><div class="role-tag role-tag-staff">üë©‚Äçüíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div></div>
  <div class="content">
    <div class="flow mb-24"><div class="flow-s done"><div class="flow-num">‚úì</div>‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div><div class="flow-arr">‚Üí</div><div class="flow-s active"><div class="flow-num">2</div>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ & ‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞</div><div class="flow-arr">‚Üí</div><div class="flow-s"><div class="flow-num">3</div>‡∏™‡πà‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div></div>

    <!-- Customer banner -->
    <div class="hb hb-green mb-24 flex items-c jc-b">
      <div class="flex items-c gap-12"><span style="font-size:20px">üìÑ</span><div><div style="font-weight:700">INV-2569-0025 ‚Äî ‡∏´‡πâ‡∏≤‡∏á 2 (SN0008)</div><div style="font-size:12px;color:var(--text-s)">‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏ø18,600 ¬∑ 12 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ¬∑ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div></div></div>
      <button class="btn btn-o btn-sm" onclick="goPage('staff-inv')">‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
    </div>

    <div class="collect-grid" style="display:grid;grid-template-columns:3fr 2fr;gap:24px">

      <!-- LEFT: Item selection + Payment info -->
      <div>
        <!-- Item selection card -->
        <div class="card mb-24">
          <div class="card-head">
            <div class="card-t">‚òëÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞</div>
            <div class="flex gap-8">
              <button class="btn btn-sm btn-p" onclick="toggleAllPay(true)">‚òëÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
              <button class="btn btn-sm btn-o" onclick="toggleAllPay(false)">‚òê ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            </div>
          </div>
          <div class="card-body" style="padding:0">

            <!-- ‡∏û.‡∏¢. 68 -->
            <div style="padding:10px 20px;background:var(--surface-alt);border-bottom:1px solid var(--border);font-size:12px;font-weight:600;color:var(--text-s)">üìÖ ‡∏û.‡∏¢. 2568</div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="3500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div><div class="pay-item-month">‡∏û.‡∏¢. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø3,500</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="1500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏û 30</div><div class="pay-item-month">‡∏û.‡∏¢. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø1,500</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="700">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏á‡∏î 3,53</div><div class="pay-item-month">‡∏û.‡∏¢. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø700</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏ò 40</div><div class="pay-item-month">‡∏û.‡∏¢. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø500</div>
            </div>

            <!-- ‡∏ò.‡∏Ñ. 68 -->
            <div style="padding:10px 20px;background:var(--surface-alt);border-bottom:1px solid var(--border);border-top:1px solid var(--border);font-size:12px;font-weight:600;color:var(--text-s)">üìÖ ‡∏ò.‡∏Ñ. 2568</div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="3500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div><div class="pay-item-month">‡∏ò.‡∏Ñ. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø3,500</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="1500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏û 30</div><div class="pay-item-month">‡∏ò.‡∏Ñ. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø1,500</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="700">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏á‡∏î 3,53</div><div class="pay-item-month">‡∏ò.‡∏Ñ. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø700</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏ò 40</div><div class="pay-item-month">‡∏ò.‡∏Ñ. 68</div></div>
              <div class="pay-item-amt mono">‡∏ø500</div>
            </div>

            <!-- ‡∏°.‡∏Ñ. 69 -->
            <div style="padding:10px 20px;background:var(--surface-alt);border-bottom:1px solid var(--border);border-top:1px solid var(--border);font-size:12px;font-weight:600;color:var(--text-s)">üìÖ ‡∏°.‡∏Ñ. 2569</div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="3500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div><div class="pay-item-month">‡∏°.‡∏Ñ. 69</div></div>
              <div class="pay-item-amt mono">‡∏ø3,500</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="1500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏û 30</div><div class="pay-item-month">‡∏°.‡∏Ñ. 69</div></div>
              <div class="pay-item-amt mono">‡∏ø1,500</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="700">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏á‡∏î 3,53</div><div class="pay-item-month">‡∏°.‡∏Ñ. 69</div></div>
              <div class="pay-item-amt mono">‡∏ø700</div>
            </div>
            <div class="pay-item sel" onclick="togglePayItem(this)" data-amt="500">
              <div class="pay-item-chk"><div class="pi-cb checked">‚úì</div></div>
              <div class="pay-item-info"><div class="pay-item-name">‡∏†‡∏ò 40</div><div class="pay-item-month">‡∏°.‡∏Ñ. 69</div></div>
              <div class="pay-item-amt mono">‡∏ø500</div>
            </div>

          </div>
        </div>

        <!-- Payment channels card (split payment) -->
        <div class="card">
          <div class="card-head">
            <div class="card-t">üí≥ ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</div>
            <button class="btn btn-sm btn-p" onclick="addPayChannel()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</button>
          </div>
          <div class="card-body" id="pay-channels">

            <!-- Channel 1 -->
            <div class="pay-channel" id="pay-ch-1">
              <div class="pay-ch-head">
                <div style="font-weight:600;font-size:14px">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà 1</div>
                <button class="btn btn-ghost btn-sm" onclick="removePayChannel(1)" style="color:var(--red);display:none" id="pay-ch-1-del">‚úï ‡∏•‡∏ö</button>
              </div>
              <div class="form-group mb-12"><div class="form-label">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</div>
                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:6px">
                  <div class="pay-opt sel" onclick="selPayCh(this)"><div style="font-size:18px">üè¶</div><div style="font-size:11px;font-weight:500">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</div></div>
                  <div class="pay-opt" onclick="selPayCh(this)"><div style="font-size:18px">üíµ</div><div style="font-size:11px;font-weight:500">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</div></div>
                  <div class="pay-opt" onclick="selPayCh(this)"><div style="font-size:18px">üìù</div><div style="font-size:11px;font-weight:500">‡πÄ‡∏ä‡πá‡∏Ñ</div></div>
                  <div class="pay-opt" onclick="selPayCh(this)"><div style="font-size:18px">üîÑ</div><div style="font-size:11px;font-weight:500">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</div></div>
                </div>
              </div>
              <div class="form-group mb-12">
                <label class="form-label">üí∞ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞</label>
                <input class="form-input mono pay-amt-input" placeholder="0.00" style="font-size:20px;font-weight:700;text-align:right;padding:12px 16px" oninput="updatePayTotal()" id="pay-ch-1-amt" />
              </div>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
                <div class="form-group"><label class="form-label">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</label><select class="form-select"><option>‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</option><option>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û</option><option>‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå</option><option>‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</option><option>‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï</option><option>‚Äî</option></select></div>
                <div class="form-group"><label class="form-label">‡πÄ‡∏•‡∏Ç‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á/‡∏™‡∏•‡∏¥‡∏õ</label><input class="form-input mono" placeholder="‡πÄ‡∏•‡∏Ç‡∏™‡∏•‡∏¥‡∏õ/‡πÄ‡∏ä‡πá‡∏Ñ" /></div>
              </div>
              <div class="form-group"><label class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö</label><input type="date" class="form-input" value="2026-02-07" /></div>
            </div>

          </div>

          <!-- Hidden template for additional channels -->
          <template id="pay-channel-tpl">
            <div class="pay-channel" id="pay-ch-{N}">
              <div class="pay-ch-head">
                <div style="font-weight:600;font-size:14px">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà {N}</div>
                <button class="btn btn-ghost btn-sm" onclick="removePayChannel({N})" style="color:var(--red)" id="pay-ch-{N}-del">‚úï ‡∏•‡∏ö</button>
              </div>
              <div class="form-group mb-12"><div class="form-label">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</div>
                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:6px">
                  <div class="pay-opt" onclick="selPayCh(this)"><div style="font-size:18px">üè¶</div><div style="font-size:11px;font-weight:500">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</div></div>
                  <div class="pay-opt sel" onclick="selPayCh(this)"><div style="font-size:18px">üíµ</div><div style="font-size:11px;font-weight:500">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</div></div>
                  <div class="pay-opt" onclick="selPayCh(this)"><div style="font-size:18px">üìù</div><div style="font-size:11px;font-weight:500">‡πÄ‡∏ä‡πá‡∏Ñ</div></div>
                  <div class="pay-opt" onclick="selPayCh(this)"><div style="font-size:18px">üîÑ</div><div style="font-size:11px;font-weight:500">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</div></div>
                </div>
              </div>
              <div class="form-group mb-12">
                <label class="form-label">üí∞ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞</label>
                <input class="form-input mono pay-amt-input" placeholder="0.00" style="font-size:20px;font-weight:700;text-align:right;padding:12px 16px" oninput="updatePayTotal()" id="pay-ch-{N}-amt" />
              </div>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
                <div class="form-group"><label class="form-label">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</label><select class="form-select"><option>‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</option><option>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û</option><option>‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå</option><option>‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</option><option>‡∏ó‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢‡∏ò‡∏ô‡∏ä‡∏≤‡∏ï</option><option>‚Äî</option></select></div>
                <div class="form-group"><label class="form-label">‡πÄ‡∏•‡∏Ç‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á/‡∏™‡∏•‡∏¥‡∏õ</label><input class="form-input mono" placeholder="‡πÄ‡∏•‡∏Ç‡∏™‡∏•‡∏¥‡∏õ/‡πÄ‡∏ä‡πá‡∏Ñ" /></div>
              </div>
              <div class="form-group"><label class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö</label><input type="date" class="form-input" value="2026-02-07" /></div>
            </div>
          </template>

          <!-- Attachment + Note -->
          <div class="card-body" style="border-top:2px solid var(--border)">
            <div class="form-group mb-16"><label class="form-label">üìé ‡πÅ‡∏ô‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô (‡∏™‡∏•‡∏¥‡∏õ/‡∏†‡∏≤‡∏û‡πÄ‡∏ä‡πá‡∏Ñ)</label>
              <div style="padding:20px;border:2px dashed var(--border);border-radius:var(--r);text-align:center;color:var(--text-m);font-size:14px;cursor:pointer">üìé ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏ß‡∏≤‡∏á<br><span style="font-size:11px">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö JPG, PNG, PDF</span></div>
            </div>
            <div class="form-group"><label class="form-label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label><input class="form-input" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏©" /></div>
          </div>
        </div>
      </div>

      <!-- RIGHT: Summary sticky -->
      <div>
        <div style="position:sticky;top:20px">
          <div style="background:var(--surface);border:2px solid var(--accent);border-radius:var(--rl);padding:24px;box-shadow:var(--sh-l)">
            <div style="font-weight:700;font-size:16px;margin-bottom:16px">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞</div>

            <div style="display:flex;justify-content:space-between;padding:10px 0;font-size:13px;border-bottom:1px solid var(--border)"><span style="color:var(--text-s)">‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span><span class="mono" style="font-weight:600">‡∏ø18,600.00</span></div>
            <div style="display:flex;justify-content:space-between;padding:10px 0;font-size:13px;border-bottom:1px solid var(--border)"><span style="color:var(--text-s)">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏≥‡∏£‡∏∞</span><span style="font-weight:600" id="pay-sel-count">12 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span></div>
            <div style="display:flex;justify-content:space-between;padding:10px 0;font-size:13px;border-bottom:1px solid var(--border)"><span style="color:var(--text-s)">‡∏¢‡∏≠‡∏î‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span><span class="mono" style="font-weight:600" id="pay-sel-amt">‡∏ø18,600.00</span></div>

            <div style="margin-top:12px;padding:12px;background:var(--surface-alt);border-radius:var(--r);border:1px solid var(--border)">
              <div style="font-size:12px;font-weight:600;color:var(--text-s);margin-bottom:8px">üí∞ ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á</div>
              <div id="pay-ch-summary"></div>
              <div style="display:flex;justify-content:space-between;padding:8px 0 0;font-size:16px;font-weight:700;border-top:1px solid var(--border);margin-top:6px">
                <span>‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á‡∏£‡∏ß‡∏°</span>
                <span class="mono" style="color:var(--green)" id="pay-total-paid">‡∏ø0.00</span>
              </div>
            </div>

            <div style="display:flex;justify-content:space-between;padding:14px 0 8px;font-size:16px;font-weight:700;border-top:2px solid var(--text);margin-top:12px">
              <span>‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á</span>
              <span class="mono" id="pay-diff" style="color:var(--text-m)">‚Äî</span>
            </div>

            <div style="margin:12px 0 20px" id="pay-status-badge">
              <span class="badge b-blue"><span class="dot"></span>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á</span>
            </div>

            <button class="btn btn-g btn-lg" style="width:100%;font-size:16px" onclick="confirmSubmit()">üì§ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button>
          </div>

          <div style="background:var(--orange-l);border:1px solid rgba(154,112,32,.2);border-radius:var(--r);padding:16px;margin-top:16px;font-size:12px;color:var(--orange)">
            ‚ö†Ô∏è ‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏à‡∏∞‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥<br>
            üí° ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏≥‡∏£‡∏∞‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏©‡πÑ‡∏î‡πâ<br>
            üí° ‡∏Å‡∏î "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î + ‡πÇ‡∏≠‡∏ô
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- ============ STAFF: SUBMIT STATUS ============ -->
<div class="page" id="page-staff-submit">
  <div class="top-bar"><div><div class="pg-title">üì§ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div><div class="pg-desc">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</div></div><div class="role-tag role-tag-staff">üë©‚Äçüíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div></div>
  <div class="content">
    <div class="in-tabs mb-24"><button class="in-tab active" onclick="switchInTab(this,'submit-pending')">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (2)</button><button class="in-tab" onclick="switchInTab(this,'submit-done')">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß (6)</button><button class="in-tab" onclick="switchInTab(this,'submit-return')">‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (0)</button></div>
    <div id="submit-pending">
    <div class="approval-card pending"><div class="flex items-c jc-b"><div><div style="font-weight:700">‡∏´‡∏à‡∏Å.A ¬∑ INV-2569-0023</div><div style="font-size:12px;color:var(--text-s)">‡πÇ‡∏≠‡∏ô KBank ¬∑ 6 ‡∏Å.‡∏û. 69</div></div><div class="text-r"><div class="mono" style="font-size:18px;font-weight:700">‡∏ø10,800</div><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></div></div></div>
    <div class="approval-card pending"><div class="flex items-c jc-b"><div><div style="font-weight:700">‡∏´‡πâ‡∏≤‡∏á 1 ¬∑ INV-2569-0021</div><div style="font-size:12px;color:var(--text-s)">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î ¬∑ 5 ‡∏Å.‡∏û. 69</div></div><div class="text-r"><div class="mono" style="font-size:18px;font-weight:700">‡∏ø3,530</div><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></div></div></div>
    </div>

    <div id="submit-done" style="display:none">
    <div class="approval-card approved"><div class="flex items-c jc-b"><div><div style="font-weight:700">‡∏ö‡∏à‡∏Å. ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç ¬∑ INV-2569-0020</div><div style="font-size:12px;color:var(--text-s)">‡πÇ‡∏≠‡∏ô SCB ¬∑ 3 ‡∏Å.‡∏û. 69 ¬∑ ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ 3 ‡∏Å.‡∏û.</div></div><div class="text-r"><div class="mono" style="font-size:18px;font-weight:700">‡∏ø8,500</div><span class="badge b-green"><span class="dot"></span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</span></div></div>
      <div class="flex gap-8 mt-12"><button class="btn btn-o btn-sm" onclick="goPage('staff-receipt')">üßæ ‡∏î‡∏π‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button><button class="btn btn-ghost btn-sm">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button></div>
    </div>
    <div class="approval-card approved"><div class="flex items-c jc-b"><div><div style="font-weight:700">‡∏´‡πâ‡∏≤‡∏á 3 ¬∑ INV-2569-0019</div><div style="font-size:12px;color:var(--text-s)">‡πÄ‡∏ä‡πá‡∏Ñ BBL ¬∑ 1 ‡∏Å.‡∏û. 69 ¬∑ ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ 1 ‡∏Å.‡∏û.</div></div><div class="text-r"><div class="mono" style="font-size:18px;font-weight:700">‡∏ø4,500</div><span class="badge b-green"><span class="dot"></span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</span></div></div>
      <div class="flex gap-8 mt-12"><button class="btn btn-o btn-sm" onclick="goPage('staff-receipt')">üßæ ‡∏î‡∏π‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button><button class="btn btn-ghost btn-sm">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button></div>
    </div>
    </div>

    <div id="submit-return" style="display:none">
      <div style="text-align:center;padding:40px;color:var(--text-m)">
        <div style="font-size:32px;margin-bottom:12px">‚úÖ</div>
        <div style="font-size:14px">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö</div>
      </div>
    </div>
  </div>
</div>

<!-- ============ STAFF: RECEIPT ============ -->
<div class="page" id="page-staff-receipt">
  <div class="top-bar"><div><div class="pg-title">üßæ ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</div><div class="pg-desc">‡∏≠‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‚Äî ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ</div></div><div class="flex gap-8"><button class="btn btn-o" onclick="goPage('staff-submit')">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button><button class="btn btn-p">üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button></div></div>
  <div class="content">
    <div class="receipt-preview">
      <div class="inv-head">
        <div><div class="inv-title">‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</div><div class="inv-no">REC-2569-0020</div><div style="font-size:12px;margin-top:4px;color:var(--text-s)">‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div></div>
        <div style="text-align:right"><div class="receipt-stamp">‚úÖ ‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</div><div style="margin-top:8px"><div class="inv-ml">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å</div><div style="font-weight:600">3 ‡∏Å.‡∏û. 2569</div></div></div>
      </div>
      <div class="inv-grid">
        <div><div class="inv-ml">‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ</div><div style="font-weight:600;font-size:15px">‡∏ö‡∏à‡∏Å. ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç</div><div style="font-size:12px;color:var(--text-s)">‡∏£‡∏´‡∏±‡∏™: SN0006</div></div>
        <div><div class="inv-ml">‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</div><div style="font-weight:600;font-size:15px">INV-2569-0020</div></div>
      </div>
      <table class="inv-table"><thead><tr><th style="text-align:left">#</th><th style="text-align:left">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th><th style="text-align:left">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th><th style="text-align:right">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th></tr></thead>
      <tbody>
        <tr><td>1</td><td>‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</td><td>‡∏°.‡∏Ñ. 69</td><td class="text-r mono">5,000.00</td></tr>
        <tr><td>2</td><td>‡∏†‡∏û 30</td><td>‡∏°.‡∏Ñ. 69</td><td class="text-r mono">2,000.00</td></tr>
        <tr><td>3</td><td>‡∏†‡∏á‡∏î 3,53</td><td>‡∏°.‡∏Ñ. 69</td><td class="text-r mono">800.00</td></tr>
        <tr><td>4</td><td>‡∏†‡∏ò 40</td><td>‡∏°.‡∏Ñ. 69</td><td class="text-r mono">700.00</td></tr>
      </tbody></table>
      <div style="display:flex;justify-content:flex-end"><div class="inv-total-box"><div style="font-size:11px;opacity:.7">‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô</div><div style="font-family:'JetBrains Mono',monospace;font-size:26px;font-weight:700">‡∏ø8,500.00</div><div style="font-size:11px;opacity:.7;margin-top:2px">(‡πÅ‡∏õ‡∏î‡∏û‡∏±‡∏ô‡∏´‡πâ‡∏≤‡∏£‡πâ‡∏≠‡∏¢‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô)</div></div></div>

      <!-- Payment details -->
      <div style="margin-top:24px;padding:16px 20px;background:var(--green-l);border-radius:var(--r);border:1px solid rgba(74,122,82,.2)">
        <div style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.4px;color:var(--green);margin-bottom:8px">üí≥ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;font-size:13px">
          <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</div><div style="font-weight:600;margin-top:2px">üè¶ ‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô</div></div>
          <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</div><div style="font-weight:600;margin-top:2px">‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå (SCB)</div></div>
          <div><div style="color:var(--text-m);font-size:10px;text-transform:uppercase">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö</div><div style="font-weight:600;margin-top:2px">3 ‡∏Å.‡∏û. 2569</div></div>
        </div>
      </div>

      <!-- Signatures -->
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-top:32px;padding-top:24px;border-top:2px solid var(--border)">
        <div style="text-align:center"><div class="sign-line"></div><div class="sign-label">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (‡∏ô‡∏≥‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ)</div></div>
        <div style="text-align:center"><div class="sign-line"></div><div class="sign-label">‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)</div></div>
      </div>
    </div>
  </div>
</div>

<!-- ============ STAFF: REPORT ============ -->
<div class="page" id="page-staff-report">
  <div class="top-bar"><div><div class="pg-title">üìã ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</div><div class="pg-desc">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞/‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</div></div><div class="flex gap-8"><select class="form-select"><option>‡∏°.‡∏Ñ. 2569</option></select></div></div>
  <div class="content">
    <div class="stats mb-24">
      <div class="stat"><div class="stat-label">‡∏¢‡∏≠‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Å‡πá‡∏ö</div><div class="stat-val" style="color:var(--blue)">‡∏ø68,500</div></div>
      <div class="stat"><div class="stat-label">‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</div><div class="stat-val" style="color:var(--green)">‡∏ø42,300</div></div>
      <div class="stat"><div class="stat-label">‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</div><div class="stat-val" style="color:var(--red)">‡∏ø26,200</div></div>
      <div class="stat"><div class="stat-label">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö</div><div class="stat-val" style="color:var(--green)">61.8%</div></div>
    </div>
    <div class="card"><div class="card-body" style="padding:16px 24px"><div class="flex items-c gap-16"><div style="font-size:13px;font-weight:600;color:var(--text-s)">‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á:</div><button class="btn btn-p btn-sm" id="sv-by-cust" onclick="switchStaffReportView('cust')">üìä ‡∏£‡∏≤‡∏¢‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button><button class="btn btn-o btn-sm" id="sv-by-tax" onclick="switchStaffReportView('tax')">üìë ‡∏£‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ</button></div></div></div>
    <div class="card mt-16" id="staff-report-cust"><div class="card-head"><div class="card-t">‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‚Äî ‡∏°.‡∏Ñ. 2569</div></div><div class="tbl-w"><table><thead><tr><th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th class="text-r">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</th><th class="text-r">‡∏†‡∏û 30</th><th class="text-r">‡∏†‡∏á‡∏î 3,53</th><th class="text-r" style="font-weight:700">‡∏£‡∏ß‡∏°</th><th class="text-r" style="color:var(--green)">‡∏ä‡∏≥‡∏£‡∏∞</th><th class="text-r" style="color:var(--red)">‡∏Ñ‡πâ‡∏≤‡∏á</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr></thead>
    <tbody>
      <tr><td><strong>‡∏´‡∏à‡∏Å.A</strong></td><td class="text-r mono">3,000</td><td class="text-r mono">1,200</td><td class="text-r mono">600</td><td class="text-r mono" style="font-weight:700">4,800</td><td class="text-r mono" style="color:var(--green)">4,800</td><td class="text-r mono">0</td><td><span class="badge b-green"><span class="dot"></span>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</span></td></tr>
      <tr><td><strong>‡∏ö‡∏à‡∏Å. ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç</strong></td><td class="text-r mono">5,000</td><td class="text-r mono">2,000</td><td class="text-r mono">800</td><td class="text-r mono" style="font-weight:700">8,500</td><td class="text-r mono" style="color:var(--green)">8,500</td><td class="text-r mono">0</td><td><span class="badge b-green"><span class="dot"></span>‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</span></td></tr>
      <tr><td><strong>‡∏´‡πâ‡∏≤‡∏á 2</strong></td><td class="text-r mono">3,500</td><td class="text-r mono">1,500</td><td class="text-r mono">700</td><td class="text-r mono" style="font-weight:700">6,200</td><td class="text-r mono">0</td><td class="text-r mono" style="color:var(--red)">6,200</td><td><span class="badge b-red"><span class="dot"></span>‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</span></td></tr>
    </tbody></table></div></div>
    <div class="card mt-16" id="staff-report-tax" style="display:none"><div class="card-head"><div class="card-t">‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏µ ‚Äî ‡∏°.‡∏Ñ. 2569</div></div><div class="tbl-w"><table><thead><tr><th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th><th class="text-r">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th><th class="text-r" style="color:var(--green)">‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß</th><th class="text-r" style="color:var(--red)">‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</th><th class="text-r">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö</th></tr></thead>
    <tbody>
      <tr><td><strong>‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</strong></td><td class="text-r mono" style="font-weight:700">‡∏ø28,000</td><td class="text-r mono" style="color:var(--green)">‡∏ø16,000</td><td class="text-r mono" style="color:var(--red)">‡∏ø12,000</td><td class="text-r">57.1%</td></tr>
      <tr><td><strong>‡∏†‡∏û 30</strong></td><td class="text-r mono" style="font-weight:700">‡∏ø12,500</td><td class="text-r mono" style="color:var(--green)">‡∏ø8,200</td><td class="text-r mono" style="color:var(--red)">‡∏ø4,300</td><td class="text-r">65.6%</td></tr>
      <tr><td><strong>‡∏†‡∏á‡∏î 3,53</strong></td><td class="text-r mono" style="font-weight:700">‡∏ø8,800</td><td class="text-r mono" style="color:var(--green)">‡∏ø5,900</td><td class="text-r mono" style="color:var(--red)">‡∏ø2,900</td><td class="text-r">67.0%</td></tr>
    </tbody>
    <tfoot><tr style="background:var(--surface-alt);font-weight:700"><td>‡∏£‡∏ß‡∏°</td><td class="text-r mono" style="color:var(--accent)">‡∏ø68,500</td><td class="text-r mono" style="color:var(--green)">‡∏ø42,300</td><td class="text-r mono" style="color:var(--red)">‡∏ø26,200</td><td class="text-r">61.8%</td></tr></tfoot></table></div></div>
  </div>
</div>

<!-- ============ STAFF: HISTORY ============ -->
<div class="page" id="page-staff-history">
  <div class="top-bar"><div><div class="pg-title">üïê ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</div><div class="pg-desc">‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</div></div><div class="role-tag role-tag-staff">üë©‚Äçüíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</div></div>
  <div class="content">
    <div class="card"><div class="tbl-w"><table><thead><tr><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th><th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th><th>‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ</th><th>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á</th><th class="text-r">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th></th></tr></thead>
    <tbody>
      <tr><td class="mono">6 ‡∏Å.‡∏û.</td><td><strong>‡∏´‡∏à‡∏Å.A</strong></td><td class="mono">INV-2569-0023</td><td>üè¶ ‡πÇ‡∏≠‡∏ô KBank</td><td class="text-r mono">‡∏ø10,800</td><td><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></td><td></td></tr>
      <tr><td class="mono">3 ‡∏Å.‡∏û.</td><td><strong>‡∏ö‡∏à‡∏Å. ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç</strong></td><td class="mono">INV-2569-0020</td><td>üè¶ ‡πÇ‡∏≠‡∏ô SCB</td><td class="text-r mono">‡∏ø8,500</td><td><span class="badge b-green"><span class="dot"></span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></td><td><button class="btn btn-ghost btn-sm" onclick="goPage('staff-receipt')">üßæ ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button></td></tr>
      <tr><td class="mono">1 ‡∏Å.‡∏û.</td><td><strong>‡∏´‡πâ‡∏≤‡∏á 3</strong></td><td class="mono">INV-2569-0019</td><td>üìù ‡πÄ‡∏ä‡πá‡∏Ñ BBL</td><td class="text-r mono">‡∏ø4,500</td><td><span class="badge b-green"><span class="dot"></span>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></td><td><button class="btn btn-ghost btn-sm" onclick="goPage('staff-receipt')">üßæ ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button></td></tr>
    </tbody></table></div></div>
  </div>
</div>

</div><!-- /main-area -->
</div><!-- /app -->

<!-- ===== MODAL: Add Customer ===== -->
<div class="modal-bg" id="modal-add-cust">
  <div class="modal">
    <div class="modal-head"><div class="modal-title">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</div><button class="btn btn-ghost btn-sm" onclick="closeModal('add-cust')">‚úï</button></div>
    <div class="modal-body">
      <div class="form-grid mb-24">
        <div class="form-group"><label class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label><input class="form-input mono" placeholder="SN0009" /></div>
        <div class="form-group"><label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£</label><input class="form-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤" /></div>
        <div class="form-group full"><label class="form-label">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label><input class="form-input" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≠‡∏Å‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ" /></div>
        <div class="form-group"><label class="form-label">‡πÄ‡∏•‡∏Ç‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ</label><input class="form-input mono" placeholder="x-xxxx-xxxxx-xx-x" /></div>
        <div class="form-group"><label class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label><input class="form-input" placeholder="0xx-xxx-xxxx" /></div>
      </div>
      <div style="font-size:12px;font-weight:600;color:var(--text-s);text-transform:uppercase;letter-spacing:.4px;margin-bottom:12px">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ + ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏†‡∏û 30</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏†‡∏á‡∏î 3,53</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏†‡∏ò 40</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏†‡∏á‡∏î 90</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏Ñ‡πà‡∏≤‡∏™‡∏≠‡∏ö ‡∏ö‡∏ä</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏†‡∏á‡∏î 51</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
        <div style="display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:var(--rs)"><span style="font-size:13px;font-weight:500;flex:1">‡∏†‡∏á‡∏î 50</span><input style="width:90px;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right" placeholder="0" /></div>
      </div>
    </div>
    <div class="modal-foot"><button class="btn btn-o" onclick="closeModal('add-cust')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button><button class="btn btn-p" onclick="closeModal('add-cust')">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button></div>
  </div>
</div>

<!-- ===== IMAGE VIEWER ===== -->
<div class="img-viewer" id="img-viewer" onclick="this.classList.remove('show')">
  <img id="img-viewer-src" src="" />
</div>

<script>
// ===================================================================
// üîß CONFIG ‚Äî ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á Apps Script Web App ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
// ===================================================================
const API_URL = 'https://script.google.com/macros/s/AKfycbx3clLD_q34LVDHTD9sXWc_euvhrWkLeib7Px-yhpO0u971U3kqWqJdW0WFZMkSPxCY/exec';  // ‚Üê ‡∏ß‡∏≤‡∏á URL ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ‡πÄ‡∏ä‡πà‡∏ô 'https://script.google.com/macros/s/AKfycbx.../exec'

// ===== API HELPERS =====
async function apiGet(action, params = {}) {
  if (!API_URL) return null;
  const url = new URL(API_URL);
  url.searchParams.set('action', action);
  Object.entries(params).forEach(([k, v]) => url.searchParams.set(k, v));
  try { const r = await fetch(url); return await r.json(); }
  catch (e) { console.error('API:', e); return null; }
}
async function apiPost(action, data = {}) {
  if (!API_URL) return null;
  try { const r = await fetch(API_URL, { method:'POST', headers:{'Content-Type':'text/plain'}, body:JSON.stringify({action,...data}) }); return await r.json(); }
  catch (e) { console.error('API:', e); return null; }
}

// ===== STATE =====
let loginRole = 'mgr', pinCode = '', currentUser = null, allCustomers = [];
const PIN_LEN = { mgr:5, staff:4 };

// ===== HELPERS =====
function fmtBaht(v) { return '‡∏ø' + (v||0).toLocaleString(); }
function statusBadge(s) {
  const map = { '‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞':'b-red', '‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î':'b-orange', '‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß':'b-green', '‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞':'b-blue', '‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥':'b-orange', '‡∏õ‡∏Å‡∏ï‡∏¥':'b-green' };
  return '<span class="badge '+(map[s]||'b-blue')+'"><span class="dot"></span>'+(s||'‡∏õ‡∏Å‡∏ï‡∏¥')+'</span>';
}

// ===== LOGIN =====
function selectLoginRole(r) {
  loginRole = r; pinCode = '';
  document.getElementById('rc-mgr').className = 'role-choice' + (r==='mgr' ? ' sel-mgr' : '');
  document.getElementById('rc-staff').className = 'role-choice' + (r==='staff' ? ' sel-staff' : '');
  document.getElementById('pin-label').textContent = r==='mgr' ? '‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô 5 ‡∏´‡∏•‡∏±‡∏Å' : '‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô 4 ‡∏´‡∏•‡∏±‡∏Å';
  renderDots(); document.getElementById('pin-err').textContent = '';
}
function renderDots() {
  const len = PIN_LEN[loginRole]; let h = '';
  for (let i=0;i<len;i++) h += '<div class="pin-dot'+(i<pinCode.length?' filled':'')+'"></div>';
  document.getElementById('pin-dots').innerHTML = h;
}
function pinInput(n) { if(pinCode.length>=PIN_LEN[loginRole])return; pinCode+=n; renderDots(); if(pinCode.length===PIN_LEN[loginRole]) setTimeout(checkPin,200); }
function pinBack() { pinCode=pinCode.slice(0,-1); renderDots(); document.getElementById('pin-err').textContent=''; }
function pinClear() { pinCode=''; renderDots(); document.getElementById('pin-err').textContent=''; }

async function checkPin() {
  const errEl = document.getElementById('pin-err');
  errEl.textContent = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...'; errEl.style.color = 'var(--blue)';

  if (!API_URL) {
    // DEMO MODE
    const PINS = { mgr:'12345', staff:'1234' };
    if (pinCode === PINS[loginRole]) {
      currentUser = { name: loginRole==='mgr'?'‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£':'‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô', code: loginRole==='mgr'?'MGR-001':'STF-001' };
      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('app').style.display = 'flex';
      setupRole(loginRole);
    } else { showPinError(); }
    return;
  }

  const result = await apiGet('verifyPin', { role:loginRole, pin:pinCode });
  if (result && result.success) {
    currentUser = { name:result.name, code:result.code };
    document.getElementById('login-screen').classList.add('hidden');
    document.getElementById('app').style.display = 'flex';
    setupRole(loginRole);
  } else { showPinError(); }
}

function showPinError() {
  const e = document.getElementById('pin-err'); e.textContent='‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'; e.style.color='var(--red)';
  document.querySelectorAll('.pin-dot').forEach(d=>d.classList.add('wrong'));
  setTimeout(()=>{ pinCode=''; renderDots(); }, 600);
}
renderDots();

// ===== ROLE SETUP =====
async function setupRole(role) {
  const badge = document.getElementById('sb-role-badge');
  const name = currentUser ? currentUser.name : (role==='mgr'?'‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£':'‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô');
  if (role==='mgr') {
    badge.className='sb-role sb-role-mgr'; badge.textContent='üëî '+name;
    document.getElementById('nav-mgr').style.display='block';
    document.getElementById('nav-staff').style.display='none';
    goPage('mgr-dash');
  } else {
    badge.className='sb-role sb-role-staff'; badge.textContent='üë©‚Äçüíº '+name;
    document.getElementById('nav-mgr').style.display='none';
    document.getElementById('nav-staff').style.display='block';
    const sn=document.getElementById('staff-role-name');
    if(sn) sn.textContent='üë©‚Äçüíº ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: '+name;
    goPage('staff-dash');
  }
  loadCustomers();
  loadDashboard(role);
}

function logout() {
  document.getElementById('app').style.display='none';
  document.getElementById('login-screen').classList.remove('hidden');
  pinCode=''; currentUser=null; allCustomers=[];
  renderDots(); document.getElementById('pin-err').textContent='';
}

// ===== DATA LOADING =====
async function loadCustomers() {
  const data = await apiGet('getCustomers');
  allCustomers = (data && !data.error) ? data : [];
  renderCustomerTables();
  renderEntrySearch();
}

function renderCustomerTables() {
  const mgrTb = document.getElementById('mgr-cust-tb');
  const stfTb = document.getElementById('staff-cust-tb');
  if (!allCustomers.length) {
    const e7 = '<tr><td colspan="7" style="text-align:center;color:var(--text-m);padding:24px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‚Äî ‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏ô Google Sheets ‡πÅ‡∏ó‡πá‡∏ö "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"</td></tr>';
    if(mgrTb) mgrTb.innerHTML=e7;
    if(stfTb) stfTb.innerHTML=e7.replace('7','6');
    return;
  }
  let mH='', sH='';
  allCustomers.forEach(c => {
    const sc = [c.accounting,c.vat,c.wht,c.sbt,c.pnd90,c.audit].filter(v=>v>0).length;
    const mo = (c.accounting||0)+(c.vat||0)+(c.wht||0)+(c.sbt||0)+(c.pnd90||0);
    const sb = statusBadge(c.status);
    mH += '<tr><td class="mono">'+c.code+'</td><td><strong>'+c.name+'</strong></td><td><span class="badge b-blue">'+sc+' ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</span></td><td class="text-r mono">'+fmtBaht(mo)+'</td><td>'+sb+'</td><td class="text-r mono">‚Äî</td><td class="text-r"><button class="btn btn-ghost btn-sm">‚úèÔ∏è</button></td></tr>';
    sH += '<tr><td class="mono">'+c.code+'</td><td><strong>'+c.name+'</strong></td><td><span class="badge b-blue">'+sc+' ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</span></td><td class="text-r mono">'+fmtBaht(mo)+'</td><td>'+sb+'</td><td class="text-r mono">‚Äî</td></tr>';
  });
  if(mgrTb) mgrTb.innerHTML=mH;
  if(stfTb) stfTb.innerHTML=sH;
}

function renderEntrySearch() {
  const c = document.getElementById('search-results');
  if(!c) return;
  if(!allCustomers.length) { c.innerHTML='<div style="padding:14px 20px;color:var(--text-m);text-align:center">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div>'; return; }
  c.innerHTML = allCustomers.map(cu =>
    '<div class="search-result-item" data-search="'+cu.code+' '+cu.name+'" onclick="selectCustEntry(\''+cu.code.replace(/'/g,"\\'")+'\',\''+cu.name.replace(/'/g,"\\'")+'\')"><span class="search-result-code">'+cu.code+'</span><strong>'+cu.name+'</strong></div>'
  ).join('');
}

function filterCustTable(val, tbId) {
  const tb = document.getElementById(tbId);
  if (!tb) return;
  const q = val.toLowerCase();
  tb.querySelectorAll('tr').forEach(tr => {
    tr.style.display = !q || tr.textContent.toLowerCase().includes(q) ? '' : 'none';
  });
}

function filterEntrySearch(val) {
  const q = val.toLowerCase();
  document.querySelectorAll('#search-results .search-result-item').forEach(item => {
    const text = (item.dataset.search || item.textContent).toLowerCase();
    item.style.display = !q || text.includes(q) ? '' : 'none';
  });
}

async function loadDashboard(role) {
  const d = await apiGet('getDashboard', {role});
  if(!d||d.error) return;
  if(role==='mgr') {
    const $=id=>document.getElementById(id);
    if($('mgr-s-cust')) $('mgr-s-cust').textContent=d.totalCustomers||0;
    if($('mgr-s-billed')) $('mgr-s-billed').textContent=fmtBaht(d.totalBilled);
    if($('mgr-s-paid')) $('mgr-s-paid').textContent=fmtBaht(d.totalPaid);
    if($('mgr-s-paid-pct')) $('mgr-s-paid-pct').textContent=(d.paidPercent||0)+'%';
    if($('mgr-s-pending')) $('mgr-s-pending').textContent=d.pendingCount||0;
    if($('mgr-s-pending-sub')) $('mgr-s-pending-sub').textContent=fmtBaht(d.pendingTotal);
    const outTb=$('mgr-outstanding-tb');
    if(outTb) {
      if(!d.topOutstanding||!d.topOutstanding.length) outTb.innerHTML='<tr><td colspan="3" style="text-align:center;color:var(--green);padding:24px">‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞</td></tr>';
      else outTb.innerHTML=d.topOutstanding.map(o=>'<tr><td><strong>'+o.name+'</strong> <span class="mono" style="color:var(--text-m)">'+o.code+'</span></td><td class="text-r mono" style="color:var(--red)">'+fmtBaht(o.amount)+'</td><td><span class="badge b-red"><span class="dot"></span>'+(o.months||1)+' ‡∏î.</span></td></tr>').join('');
    }
    const pl=$('mgr-pending-list');
    if(pl) {
      if(!d.pendingApproval||!d.pendingApproval.length) pl.innerHTML='<div style="text-align:center;color:var(--green);padding:24px">‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</div>';
      else pl.innerHTML=d.pendingApproval.map(p=>'<div class="approval-card pending"><div class="flex items-c jc-b"><div><div style="font-weight:600">'+p.custName+' ¬∑ '+fmtBaht(p.amount)+'</div><div style="font-size:12px;color:var(--text-s)">'+p.channel+' ¬∑ '+p.staff+' ¬∑ '+p.date+'</div></div><span class="badge b-orange"><span class="dot"></span>‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></div></div>').join('');
    }
  }
}

// ===== NAVIGATION =====
function goPage(id) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const t=document.getElementById('page-'+id); if(t) t.classList.add('active');
  document.querySelectorAll('.nav-i').forEach(n=>{
    n.classList.remove('active');
    if(n.getAttribute('onclick')?.includes("'"+id+"'")) n.classList.add('active');
  });
  window.scrollTo({top:0,behavior:'instant'});
}

// ===== MODAL =====
function openModal(n){document.getElementById('modal-'+n).classList.add('show')}
function closeModal(n){document.getElementById('modal-'+n).classList.remove('show')}
document.querySelectorAll('.modal-bg').forEach(b=>b.addEventListener('click',e=>{if(e.target===b) b.classList.remove('show')}));

function openImgViewer(src){document.getElementById('img-view-src').src=src;openModal('img-view')}

// ===== PAYMENT (Collect) =====
function selPay(el){el.classList.toggle('sel');el.querySelectorAll('.pay-ch-row').forEach(r=>r.classList.toggle('sel',el.classList.contains('sel')))}
var selPayCh=selPay;

function addPayChannel(){
  const c=document.getElementById('pay-channels'); if(!c)return;
  const n=c.querySelectorAll('.pay-ch-row').length+1, d=document.createElement('div');
  d.className='pay-ch-row'; d.id='pay-ch-'+n;
  d.innerHTML='<select class="form-select" style="flex:1;font-size:16px"><option>‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</option><option>‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</option><option>‡πÄ‡∏ä‡πá‡∏Ñ</option><option>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option></select><select class="form-select" style="flex:1;font-size:16px"><option>‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</option><option>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û</option><option>‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå</option><option>‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</option></select><input class="form-input pay-amt-input" style="flex:1;font-size:18px;text-align:right;font-family:JetBrains Mono" placeholder="0" oninput="updatePayTotal()" /><button class="btn btn-danger btn-sm" onclick="removePayChannel('+n+')" style="font-size:16px;padding:12px 16px">‚úï</button>';
  c.appendChild(d);
}
function removePayChannel(n){const e=document.getElementById('pay-ch-'+n);if(e)e.remove();updatePayTotal()}

function updatePayTotal(){
  const inputs=document.querySelectorAll('.pay-amt-input');
  let totalPaid=0; inputs.forEach(i=>totalPaid+=parseFloat(i.value.replace(/,/g,''))||0);
  const expected=18600, diff=totalPaid-expected;
  const tE=document.getElementById('pay-total-display');
  if(tE) tE.textContent=fmtBaht(totalPaid);
  const dE=document.getElementById('pay-diff'),dB=document.getElementById('pay-diff-badge');
  if(totalPaid===0){ if(dE){dE.textContent='‚Äî';dE.style.color='var(--text-m)'} if(dB){dB.textContent='‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á';dB.className='badge b-blue'} return; }
  if(dE){dE.textContent=(diff>=0?'+':'')+fmtBaht(diff);dE.style.color=diff===0?'var(--green)':diff>0?'var(--blue)':'var(--red)'}
  if(dB){if(diff===0){dB.textContent='‚úÖ ‡∏¢‡∏≠‡∏î‡∏ï‡∏£‡∏á';dB.className='badge b-green'}else if(diff>0){dB.textContent='üí∞ ‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏¥‡∏ô';dB.className='badge b-blue'}else{dB.textContent='‚ö†Ô∏è ‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏î';dB.className='badge b-red'}}
}

function togglePayItem(el){el.classList.toggle('sel');updatePaySummary()}
function toggleAllPay(s){document.querySelectorAll('.pay-item').forEach(e=>s?e.classList.add('sel'):e.classList.remove('sel'));updatePaySummary()}
function updatePaySummary(){
  const it=document.querySelectorAll('.pay-item.sel');let t=0;it.forEach(e=>t+=parseFloat(e.dataset.amt||0));
  const s=document.getElementById('pay-sel-total'),c=document.getElementById('pay-sel-count');
  if(s) s.textContent=fmtBaht(t); if(c) c.textContent=it.length+' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
}

// ===== ENTRY PAGE =====
async function selectCustEntry(code, name) {
  document.getElementById('mgr-cust-search').value=code+' ‚Äî '+name;
  document.getElementById('sel-cust-name').textContent=code+' ‚Äî '+name;
  document.getElementById('search-results').classList.remove('show');
  document.getElementById('entry-area').style.display='block';
  document.getElementById('sel-cust-sub').textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...';
  clearAllSvc();
  const ms=document.getElementById('entry-month');
  const month=ms?ms.value:'‡∏°.‡∏Ñ. 2569';
  document.getElementById('sel-cust-sub').textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î: '+month;
  window._entryCust={code,name,month};

  if(API_URL){
    const prev=await apiGet('getPrevMonth',{custCode:code,currentMonth:month});
    if(prev&&prev.found) showPrevBanner(prev); else showNewBanner();
  } else { showNewBanner(); }
  window.scrollTo({top:document.getElementById('entry-area').offsetTop-80,behavior:'smooth'});
}

function showPrevBanner(prev){
  document.getElementById('prev-month-banner').style.display='block';
  document.getElementById('new-cust-banner').style.display='none';
  document.getElementById('prev-month-label').textContent=prev.month;
  document.getElementById('prev-month-total').textContent=fmtBaht(prev.total);
  window._prevData=prev.amounts;
  const keys=['accounting','vat','wht','sbt','pnd90','pnd94','other'];
  const rows=document.querySelectorAll('#entry-area .svc-row-lg');
  keys.forEach((k,i)=>{
    if(!rows[i])return; const pd=rows[i].querySelector('.svc-prev'), v=prev.amounts[k]||0;
    if(pd&&v>0){pd.style.display='inline-block';pd.textContent='‡πÄ‡∏î‡∏¥‡∏°: '+v.toLocaleString();pd.dataset.val=v;
      pd.onclick=function(){rows[i].querySelector('.svc-input-lg').value=v.toLocaleString();rows[i].classList.add('has-val');updateEntryTotal()};
    } else if(pd) pd.style.display='none';
  });
}

function showNewBanner(){
  document.getElementById('prev-month-banner').style.display='none';
  document.getElementById('new-cust-banner').style.display='block';
  document.querySelectorAll('#entry-area .svc-prev').forEach(d=>d.style.display='none');
  window._prevData=null;
}

function fillAllPrev(){
  if(!window._prevData)return;
  const keys=['accounting','vat','wht','sbt','pnd90','pnd94','other'];
  const rows=document.querySelectorAll('#entry-area .svc-row-lg');
  keys.forEach((k,i)=>{if(rows[i]&&window._prevData[k]>0){rows[i].querySelector('.svc-input-lg').value=window._prevData[k].toLocaleString();rows[i].classList.add('has-val')}});
  document.getElementById('prev-month-banner').style.display='none';
  updateEntryTotal();
}

function clearAllSvc(){document.querySelectorAll('#entry-area .svc-row-lg').forEach(r=>{const i=r.querySelector('.svc-input-lg');if(i)i.value='';r.classList.remove('has-val')});updateEntryTotal()}
function resetEntryArea(){document.getElementById('entry-area').style.display='none';document.getElementById('mgr-cust-search').value='';clearAllSvc();window._entryCust=null}

function updateEntryTotal(){
  let t=0,c=0;
  document.querySelectorAll('#entry-area .svc-input-lg').forEach(i=>{
    const v=parseFloat(i.value.replace(/,/g,''))||0;if(v>0){t+=v;c++}
    const r=i.closest('.svc-row-lg');if(r){v>0?r.classList.add('has-val'):r.classList.remove('has-val')}
  });
  const tE=document.getElementById('entry-total-val');if(tE)tE.textContent=fmtBaht(t);
  const cE=document.getElementById('entry-item-count');if(cE)cE.textContent=c+' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
}

async function saveEntry(){
  const inputs=document.querySelectorAll('#entry-area .svc-input-lg');
  const keys=['accounting','vat','wht','sbt','pnd90','pnd94','other','audit','pnd51','pnd50'];
  let t=0,c=0;const amounts={};
  inputs.forEach((inp,i)=>{const v=parseFloat(inp.value.replace(/,/g,''))||0;if(v>0){t+=v;c++}if(keys[i])amounts[keys[i]]=v});
  if(c===0){alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');return}
  if(!window._entryCust){alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô');return}
  const cu=window._entryCust;
  if(!confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏¢‡∏≠‡∏î?\n\n'+cu.code+' ‚Äî '+cu.name+'\n‡πÄ‡∏î‡∏∑‡∏≠‡∏ô: '+cu.month+'\n'+c+' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ¬∑ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: '+fmtBaht(t)))return;
  if(API_URL){
    const r=await apiPost('saveEntry',{custCode:cu.code,custName:cu.name,month:cu.month,...amounts});
    if(r&&r.success){alert('‚úÖ '+r.message+'\n\n‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏¢‡∏≠‡∏î‡∏ô‡∏µ‡πâ');resetEntryArea()}
    else alert('‚ùå '+(r?.error||'‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ'));
  } else { alert('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (Demo)');resetEntryArea(); }
}

function onEntryMonthChange(){resetEntryArea()}

// ===== REPORT =====
function switchReportView(v){
  ['cust','tax','one'].forEach(x=>{document.getElementById('report-by-'+x).style.display=x===v?'block':'none';document.getElementById('view-by-'+x).className='btn btn-sm '+(x===v?'btn-p':'btn-o')});
  const cw=document.getElementById('cust-select-wrap');if(cw)cw.style.display=v==='one'?'block':'none';
}

// ===== INVOICE FLOW =====
let invCustCode='',invCustName='';
function setInvFlow(s){const f=[document.getElementById('inv-flow-1'),document.getElementById('inv-flow-2'),document.getElementById('inv-flow-3')];if(!f[0])return;f.forEach(x=>x.className='flow-s');if(s>=1)f[0].className=s===1?'flow-s active':'flow-s done';if(s>=2)f[1].className=s===2?'flow-s active':'flow-s done';if(s>=3)f[2].className='flow-s active'}
function filterInvCust(v){document.querySelectorAll('.inv-cust-row').forEach(r=>{r.style.display=r.textContent.toLowerCase().includes(v.toLowerCase())?'':'none'})}
function selectInvCust(code,name){invCustCode=code;invCustName=name;document.getElementById('inv-step-select').style.display='none';document.getElementById('inv-step-list').style.display='block';document.getElementById('inv-step-print').style.display='none';document.getElementById('inv-sel-name').textContent=code+' ‚Äî '+name;document.getElementById('inv-sel-info').textContent='‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';setInvFlow(2)}
function backToInvSelect(){document.getElementById('inv-step-select').style.display='block';document.getElementById('inv-step-list').style.display='none';document.getElementById('inv-step-print').style.display='none';document.getElementById('inv-cust-search').value='';filterInvCust('');setInvFlow(1)}
function backToInvList(){document.getElementById('inv-step-select').style.display='none';document.getElementById('inv-step-list').style.display='block';document.getElementById('inv-step-print').style.display='none';setInvFlow(2)}
function generateInvPreview(){const items=[['‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ','‡∏û.‡∏¢. 68',3500],['‡∏†‡∏û 30','‡∏û.‡∏¢. 68',1500],['‡∏†‡∏á‡∏î 3,53','‡∏û.‡∏¢. 68',700],['‡∏†‡∏ò 40','‡∏û.‡∏¢. 68',500],['‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ','‡∏ò.‡∏Ñ. 68',3500],['‡∏†‡∏û 30','‡∏ò.‡∏Ñ. 68',1500],['‡∏†‡∏á‡∏î 3,53','‡∏ò.‡∏Ñ. 68',700],['‡∏†‡∏ò 40','‡∏ò.‡∏Ñ. 68',500],['‡∏Ñ‡πà‡∏≤‡∏ó‡∏≥‡∏ö‡∏±‡∏ç‡∏ä‡∏µ','‡∏°.‡∏Ñ. 69',3500],['‡∏†‡∏û 30','‡∏°.‡∏Ñ. 69',1500],['‡∏†‡∏á‡∏î 3,53','‡∏°.‡∏Ñ. 69',700],['‡∏†‡∏ò 40','‡∏°.‡∏Ñ. 69',500]];const tb=document.getElementById('inv-print-body');tb.innerHTML='';let t=0;items.forEach((it,i)=>{t+=it[2];const tr=document.createElement('tr');tr.innerHTML='<td>'+(i+1)+'</td><td>'+it[0]+'</td><td>'+it[1]+'</td><td class="text-r mono">'+it[2].toLocaleString()+'.00</td>';tb.appendChild(tr)});document.getElementById('inv-print-total').textContent=fmtBaht(t)+'.00';document.getElementById('inv-print-total-text').textContent='('+items.length+' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)';document.getElementById('inv-print-cust').textContent=invCustName;document.getElementById('inv-print-code').textContent='‡∏£‡∏´‡∏±‡∏™: '+invCustCode;document.getElementById('inv-print-no').textContent='INV-2569-'+String(Math.floor(Math.random()*900+100)).padStart(4,'0');document.getElementById('inv-step-select').style.display='none';document.getElementById('inv-step-list').style.display='none';document.getElementById('inv-step-print').style.display='block';setInvFlow(3);window.scrollTo({top:0,behavior:'smooth'})}

// ===== STAFF REPORT =====
function switchStaffReportView(v){document.getElementById('staff-report-cust').style.display=v==='cust'?'block':'none';document.getElementById('staff-report-tax').style.display=v==='tax'?'block':'none';document.getElementById('sv-by-cust').className='btn btn-sm '+(v==='cust'?'btn-p':'btn-o');document.getElementById('sv-by-tax').className='btn btn-sm '+(v==='tax'?'btn-p':'btn-o')}

// ===== INIT =====
document.addEventListener('DOMContentLoaded',function(){const td=new Date().toISOString().split('T')[0];document.querySelectorAll('input[type="date"]').forEach(i=>{if(i.value)i.value=td})});

// ===== TAB SWITCHING =====
function switchInTab(btn,targetId){btn.parentElement.querySelectorAll('.in-tab').forEach(t=>t.classList.remove('active'));btn.classList.add('active');const p=document.getElementById(targetId)?.parentElement;if(!p)return;const pf=targetId.split('-')[0]+'-';p.querySelectorAll(':scope > [id^="'+pf+'"]').forEach(d=>{d.style.display=d.id===targetId?'block':'none'})}

// ===== CONFIRM SUBMIT =====
function confirmSubmit(){const si=document.querySelectorAll('.pay-item.sel'),inp=document.querySelectorAll('.pay-amt-input');let tp=0;inp.forEach(i=>tp+=parseFloat(i.value.replace(/,/g,''))||0);if(!si.length){alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£');return}if(tp<=0){alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô');return}let sa=0;si.forEach(e=>sa+=parseFloat(e.dataset.amt||0));if(confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥?\n\n'+si.length+' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ¬∑ ‡∏¢‡∏≠‡∏î‡∏£‡∏±‡∏ö: '+fmtBaht(tp))){alert('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏™‡πà‡∏á‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß')}}
</script>
</body>
</html>
